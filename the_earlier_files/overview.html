<!DOCTYPE html>
<html>
<head>
  <title>Overview</title>
</head>

<body>
 <div> <h1>Primitives</h1>
 <p>It is assumed that the reader has some working familiarity with the following terms and concepts.  </p>
 <ul style="list-style-type:square">
	 <li><strong>Machine</strong> The hardware/machine (computer) on which the operating system is running.  </li>
	 <li><strong>(Physical) Memory</strong> The physical memory (primary memory) of the machine.</li>
	 <li><strong>Word</strong> The fundamental unit of memory access/storage recognized by the XOS.  A word is assumed to be able to store an integer or a character string.</li>
	 <li><strong>Page</strong> The memory is assumed to be divided into pages of contiguous memory words.  It is assumed that the machine supports <a href="http://en.wikipedia.org/wiki/Paging">paging hardware. </a></li>
	 <li><strong>Disk</strong> The secondary storage where data and program files are stored.  The disk operating system code also is stored in the disk and is loaded from the disk to the memory at the time of bootstrap. </li>
	 <li><strong>Block</strong> The basic unit of disk access.    A block can store a sequence of words.  The number of words per block is hardware dependent.  </li>
	 <li><strong>File</strong> Each file is a sequence of words, stored in the disk.   The most important file types are <b>program </b>files (or <b>executable</b> files or application programs) and data files.  </li>
	 <li><strong>Process</strong>  An application program under execution is called a <a href="http://en.wikipedia.org/wiki/Process_%28computing%29">process.</a> </li>
	 <li><strong>Kernel</strong> The core part of the eXpOS operating system that forms a layer between the hardware and application programs.  The kernel essentially is a collection of routines residing in the memory of the machine.   In this document, the term “operating system” normally refers to the <a href="http://en.wikipedia.org/wiki/Kernel_%28operating_system%29">kernel.</a></li>
	 <li><strong>System Calls</strong> These are kernel routines which application programs can invoke to do actions which only the OS reserves right to perform (Example: creating/modifying files or creating/destroying processes).  </li>
	 <li><strong>Multiprogramming</strong> Multiple processes reside in the memory simultaneously and the OS time-shares the machine between the processes by <b>scheduling</b>.  The processes are said to execute concurrently.  An OS that supports concurrent execution of processes is called a multiprogramming OS</li>
	 <li><strong>Timer</strong> The hardware device that interrupts the machine periodically.  The scheduler is generally invoked by the timer interrupt service routine. </li>
 </ul>
 </div>
 
 <div><h1>Assumptions about hardware.  </h1>
 <p>The OS specification assumes a generic hardware model described below.  </p>
 <b> Figure here on the hardware model - abstract one - not depend on XSM.  </b>
 <p>The basic Machine model consists of memory, disk and the CPU.  A small part of memory is assumed to contain a <b>bootstrap loader</b> stored permanently in ROM memory.  These are machine instructions to load into the memory an <b>OS startup code </b> stored in a pre-defined area in the disk.  The ROM code then transfers control to this newly loaded code.  This code loads the operating system routines stored in (pre-defined areas of) the disk into memory and sets up the Operating system.   This includes all the OS code for various system calls, the scheduler, the exception handler, device drivers etc.  Further hardware support required like the timer, disk controller, Input-output system etc. are discussed later.</p>
 <p>For eXpOS to work, the machine should support two <b>privilege levels</b> of program execution.  These are called <b>the user mode</b> (unprivileged mode) and the <b>system mode </b>(privileged mode).  User programs (or application programs) run in user mode whereas OS routines run in system mode.   The collection of OS routines that run in system mode is called the <b>kernel </b>of the operating system.  A user program in execution is called a <b>process</b>.  (Sometimes the term "program" may be (ab)used to refer to the corresponding process).   An application process has access only to a limited set of machine instructions and can only access a limited set of memory addresses called the <b>virtual address space</b> of the process.    This restricted machine model provided by the OS (of course, using the support from the machine architecture) is called the <b>virtual machine model</b>.  </p>
 <p>The OS logically divides virtual address space of a process into <b>library, code, data, stack and heap </b> regions.   eXpOS assumes  that the machine provides <b>paging  </b>hardware to implement the mapping of virtual address space into the physical memory when the program is loaded into memory for execution.  <a href="paging_translation.html">The following link discusses how such mapping is done. </a>   If the machine supports <a href="http://en.wikipedia.org/wiki/Memory_segmentation#Segmentation_with_paging">segmented paging</a>,  the feature can be used profitably.  However, the discussion here assumes no segmentation support.  </p>
 <p>Data and program files are stored in the disk.  The disk is typically divided into <b>blocks</b> and the machine provides instructions to transfer blocks into and out of memory.   These instructions can be accessed only in the system mode.   The specific mechanisms available are hardware dependent.   A simple model for <a href="disk_access.html">disk access</a> is discussed here.   Note that since processes run in user mode, they can access disk files only through invoking the designated system calls for the purpose.</p>
 <p>User programs are generally stored as <b>executable files</b> in the disk.  Typically the user writes the application programs in a high level language and a compiler generates the executable file.  The OS expects that executable files follow certain format and compilers must adhere to the format.   This allows the OS to figure out where and how much space must be allocated for library, stack, code, data and heap in the virtual address space when the program is loaded into memory for execution.  The virtual machine model as well as the executable file format for eXpOS are described in the eXpOS <a href="ABI.html">application binary interface </a> documentation. </p>
 <p>At the end of the bootstrap process, the OS startup code hand-creates the first user process called the <b> INIT process </b> in memory.  Thereafter, new processes can be created by existing processes by invoking the OS system calls for the purpose. Recall that the system call routines would have been set up in the memory during the bootstrap process.     The INIT process creates a special user process called the <b>shell process </b>by loading and executing a <b>shell program </b> from the disk.    The shell program repetitively reads user commands from the input and executes programs specified by the user and the OS becomes functional.   The specification of the INIT and the shell process are described in this <a href="shell_spec.html">link</a>. </p>
 <p>eXpOS treats the standard input and output devices just like special files.   Hence user processes must use the system calls to read/write files to perform I/O operations.   The underlying implementation details are hardware dependent and are left unspecified in the OS specification.  </p>
 <p>Finally, eXpOS assumes that the machine is equipped with a <b>hardware timer </b> device that can interrupt the machine at pre-defined regular intervals.  The timer is crucial for multiprogramming.  The timer interrupt handler is responsible for invoking the eXpOS kernel's <b>scheduler</b> routine which is responsible for <b>timesharing</b> the machine between processes.   Similarly, disk/input-output devices may require handler interrupt service routines.  These are hardware dependent and hence left unspecified in the OS specification.   A discussion of these issues is taken up in <a href="miscellaneous.html"> Section 6</a>.  
</p>
 </div>
</body>
</html>
