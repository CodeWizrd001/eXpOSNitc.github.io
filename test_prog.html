<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Basic Page Needs
    ================================================== -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <title>ExpL Test Programs</title>

    <!-- Mobile Specific Metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="img/favicon.jpg"/>

    <!-- CSS
    ================================================== -->       
    <!-- Bootstrap css file-->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Font awesome css file-->
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <!-- Superslide css file-->
    <link rel="stylesheet" href="css/superslides.css">
    <!-- Slick slider css file -->
    <link href="css/slick.css" rel="stylesheet"> 
    <!-- smooth animate css file -->
    <link rel="stylesheet" href="css/animate.css">  
    <!-- Elastic grid css file -->
    <link rel="stylesheet" href="css/elastic_grid.css"> 
    <!-- Circle counter cdn css file -->
    <link rel='stylesheet prefetch' href='css/jquery.circliful.css'>    
    <!-- Default Theme css file -->
    <link id="orginal" href="css/themes/eucalyptus-theme.css" rel="stylesheet">
    <!-- Main structure css file -->
    <link href="style.css" rel="stylesheet">
   
    <!-- Google fonts -->
    <link href='css/opensans.css' rel='stylesheet' type='text/css'>
    <link href='css/varela.css' rel='stylesheet' type='text/css'>
    <link href='css/montserrat.css' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
<!--Css added only for this file to get the line numbers in the code-->
<style type="text/css">
pre {
    
    font-family: monospace;
    line-height: 0;
    counter-reset: line;
  }

pre span
{

  display: block;
  line-height: 1.5rem;

}
pre span:before {
      counter-increment: line;
      content: counter(line);
      display: inline-block;
      padding: 0.5em;
      margin-right: 0.5em;
      border-right: 1px solid #ddd;
 }
</style>

  </head>
  <body> 
     <!-- BEGAIN PRELOADER -->
    <div id="preloader">
      <div id="status">&nbsp;</div>
    </div>
    <!-- END PRELOADER -->

  
    <!--=========== BEGIN HEADER SECTION ================-->
    <header id="header">
      <!-- BEGIN MENU -->
      <div class="menu_area">
        <nav class="navbar navbar-default navbar-fixed-top past-main" role="navigation"> 
          <div class="container">
          <div class="navbar-header">
            <!-- FOR MOBILE VIEW COLLAPSED BUTTON -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            <!-- LOGO -->

            <!-- TEXT BASED LOGO -->
            <a class="navbar-brand" href="index.html">eXpOS<span >NITC</span></a>
            
                              
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul id="top-menu" class="nav navbar-nav navbar-right main_nav">
              <li><a href="./index.html">Home</a></li>
              <li><a href="./documentation.html" target="_blank">Documentation</a></li> 
              <li><a href="./Roadmap.html" target="_blank">Roadmap</a></li>
               <li><a href="faq.html" target="_blank">FAQ</a></li>
              <li><a href="About_us.html" target="_blank">About Us</a></li>                                     
            </ul>           
          </div>
          </div>     
        </nav>  
      </div>
      <!-- END MENU -->

      
    </header>
    <!--=========== End HEADER SECTION ================-->   
    
  <!--=========== BEGIN contents SECTION ================-->

    
    <section>
      <div class="container">
        <div class="row">
      <!-- heading -->
          <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="heading">
              <br/><br/><br/>
              <h2 >ExpL Test Programs</h2>
              <br>
              <br>
              
            </div>
          </div>
        <!--end heading-->   
       
        <div class="panel-body"  id="shell_version_2_p"  >
       <b style="font-size: 20px">1. Test Program 1 (Shell version-II without multiuser)</b><br><br>
       <table class="table table-bordered">
                                                    <tr>
                                                        <td><b>Input<b></td>
                                                        <td>Executable file name/string "Shutdown"</td>
                                                    </tr> 
                                                    <tr>
                                                        <td><b>Output</b></td>
                                                        <td>Executes given xsm program/halt system if input is "Shutdown"</td>
                                                    </tr>
                                                  </table>
                                                <p style="text-indent: 0px"><b>Description :</b> shell version II without the multiuser</p><br>
       <div><pre>
<span>int main()</span>
<span>{</span>
<span>decl</span>
<span>          int temp, pid, a;</span>
<span>          string input;</span>
<span>enddecl</span>
<span>begin</span>
<span>          a=1;</span>
<span>          while(a == 1) do</span>
<span>              temp = exposcall("Write",-2,"---Enter---");</span>
<span>              temp = exposcall("Read",-1, input);</span>
<span>              if(input != "Shutdown") then</span>
<span>                  pid = exposcall("Fork");</span>
<span>                  if(pid < 0) then</span>
<span>                      temp = exposcall("Write",-2, "Fork Failure");</span>
<span>                      continue;</span>
<span>                  endif;</span>
<span>                  if(pid != 0) then</span>
<span>                      temp = exposcall("Wait",pid);</span>
<span>                  else</span>
<span>                      temp = exposcall("Exec",input);</span>
<span>                      if(temp != 0) then</span>
<span>                          temp = exposcall("Write",-2, "BAD COMMAND");</span>
<span>                          break;</span>
<span>                      endif;</span>
<span>                  endif;</span>
<span>              else</span>
<span>                  temp = exposcall("Shutdown");</span>
<span>                  break;</span>
<span>              endif;</span>
<span>          endwhile;</span>
<span>          return 0;</span>
<span>end</span>
<span>}</span></pre>
       </div>

</div>      

      
        <div class="panel-body" id="ll"  >
              <br><br>
              <hr>
              <br><br>
       <b style="font-size: 20px;">2. Test Program 2  </b><br><br>
       <table class="table table-bordered">
                                                    <tr>
                                                        <td><b>Input</b></td>
                                                        <td>An integer N and N integers. </td>
                                                    </tr> 
                                                    <tr>
                                                        <td><b>Output</b></td>
                                                        <td>N integers entered in the input.</td>
                                                    </tr>
                                                  </table>
                                                <p style="text-indent: 0px"><b>Description :</b> The program given below  implements a linked list for integers. The program reads an integer N from the console. It then creates a linked list and inserts N integers entered from console into the linked list in the same order. The program traverses the linked list and prints data to the console.</p><br>
       <div><pre >
<span>type</span>
<span>List</span>
<span>{</span>
<span>          int data;</span>
<span>          List next;</span>
<span>}</span>
<span>endtype</span>
<span>decl</span>
<span>          List head;</span>
<span>enddecl</span>
<span>int main()</span>
<span>{</span>
<span>decl</span>
<span>          int length, x, temp;</span>
<span>          List p, q;</span>
<span>enddecl</span>
<span>begin</span>
<span>         x = exposcall("Heapset");</span>
<span>          head=null;</span>
<span>          x = exposcall("Read",-1,length);</span>
<span>          q = head;</span>
<span>          while (length!=0)  do</span>
<span>              temp = exposcall("Read",-1,x);</span>
<span>              p= exposcall("Alloc",2);</span>
<span>              p.data=x;</span>
<span>              p.next=null;</span>
<span>              if (head == null) then</span>
<span>                  head=p;</span>
<span>                  q=p;</span>
<span>              else</span>
<span>                  q.next=p;</span>
<span>                  q=q.next;</span>
<span>              endif;</span>
<span>              length=length-1;</span>
<span>          endwhile;</span>
<span>          p=head;</span>
<span>          while(p!=null)  do</span>
<span>              x=p.data;</span>
<span>              temp= exposcall("Write",-2,x);</span>
<span>              p=p.next;</span>
<span>          endwhile;</span>
<span>          return 0;</span>
<span>end</span>
<span>}</span></pre>
       </div>

</div>


              <div class="panel-body" id="ll_fork" >
              <br><br>
              <hr>
              <br><br>
      
       <b style="font-size: 20px; " >3. Test Program 3 </b><br><br>
       <table class="table table-bordered">
                                                    <tr>
                                                        <td><b>Input<b></td>
                                                        <td>-</td>
                                                    </tr> 
                                                    <tr>
                                                        <td><b>Output</b></td>
                                                        <td>Integers 1 to 100, not necessarily in the order. </td>
                                                    </tr>
                                                  </table>
                                                <p style="text-indent: 0px"><b>Description :</b> The program creates a linked list with numbers 1 to 100 in them. The program invokes fork to create a child process. The parent and the child process reads from the shared linked list with different pointers and prints the data read to the console. Parent process prints the even numbers 2, 4, 6, 8.. and child process prints 1, 3, 5 ..   </p><br>
       <div><pre>
<span>type</span>
<span>List</span>
<span>{</span>
<span>          int data;</span>
<span>          List next;</span>
<span>}</span>
<span>endtype</span>
<span>decl</span>
<span>          List head;</span>
<span>          int  x, pid, temp, length;</span>
<span>enddecl</span>
<span>int main()</span>
<span>{</span>
<span>decl</span>
<span>          List p, q;</span>
<span>          int i;</span>
<span>enddecl</span>
<span>begin</span>
<span>          temp = exposcall("Heapset");</span>
<span>          head = null;</span>
<span>          q = head;</span>
<span>          length=1;</span>
<span>          while (length <= 100)  do</span>
<span>              p = exposcall("Alloc",2);</span>
<span>              p.data = length;</span>
<span>              p.next = null;</span>
<span>              if (head == null) then</span>
<span>                  head = p;</span>
<span>                  q = p;</span>
<span>              else</span>
<span>                  q.next = p;</span>
<span>                  q = q.next;</span>
<span>              endif;</span>
<span>              length = length+1;</span>
<span>          endwhile;</span>
<span>          pid = exposcall("Fork");</span>
<span>          if(pid == 0) then</span>
<span>              p = head;</span>
<span>              while(p != null)  do</span>
<span>                  x = p.data;</span>
<span>                  temp = exposcall("Write",-2,x);</span>
<span>                  p = p.next;</span>
<span>                  if(p == null) then</span>
<span>                      break;</span>
<span>                  endif;</span>
<span>                  p = p.next;</span>
<span>              endwhile;</span>
<span>          else</span>
<span>              q = head.next;</span>
<span>              while(q != null)  do</span>
<span>                  x = q.data;</span>
<span>                  temp = exposcall("Write",-2,x);</span>
<span>                  q = q.next;</span>
<span>                  if(q == null) then</span>
<span>                      break;</span>
<span>                  endif;</span>
<span>                  q = q.next;</span>
<span>              endwhile;</span>
<span>          endif;</span>
<span>          return 0;</span>
<span>end</span>
<span>}</span></pre>
       </div>

</div>


<div class="panel-body" id="test_program_4"  >
              <br><br>
              <hr>
              <br><br>
       <b style="font-size: 20px;">4. Test Program 4 (Reader-writer Program)  </b><br><br>
       <table class="table table-bordered">
                                                    <tr>
                                                        <td><b>Input</b></td>
                                                        <td>-</td>
                                                    </tr> 
                                                    <tr>
                                                        <td><b>Output</b></td>
                                                        <td>Integers from 1 to 100, but not necessarily in sequential order.</td>
                                                    </tr>
                                                  </table>
                                                <p style="text-indent: 0px"><b>Description :</b> The  reader-writer program provides below has two writers and one reader. The parent process will create two child processes by invoking <i>fork</i>. The parent and two child processes share a buffer of one word. At a time only one process can read/write to this buffer. To acheive this, these three processes use a shared semaphore. A writer process can write to the buffer if it is empty and the reader process can only read from the buffer if it is full. Before the word in the buffer is overwritten the reader  process must read it and print the word to the console. The parent process is the reader process and its two children are writers. One child process writes even numbers from 1 to 100 and other one writes odd numbers from 1 to 100 to the buffer. The parent process reads the numbers and prints them on to the console.</p><br>
<div><pre>
<span>type</span>
<span>Share</span>
<span>{</span>
<span>          int isempty;</span>
<span>          int data;</span>
<span>}</span>
<span>endtype</span>
<span>decl</span>
<span>          Share head;</span>
<span>enddecl</span>
<span>int main()</span>
<span>{</span>
<span>decl</span>
<span>          int temp, x, pidone, pidtwo, semid, iter;</span>
<span>enddecl</span>
<span>begin</span>
<span>          x = exposcall("Heapset");</span>
<span>          semid = exposcall("Semget");</span>
<span>          head = exposcall("Alloc",2);</span>
<span>          head.isempty = 1;</span>
<span>          pidone = exposcall("Fork");</span>
<span>          if (pidone == 0 ) then</span>
<span>              iter=1;</span>
<span>              while(iter <= 100) do</span>
<span>                  temp = exposcall("SemLock", semid);</span>
<span>                  temp = head.isempty;</span>
<span>                  if(temp == 1) then</span>
<span>                      head.data = iter;</span>
<span>                      head.isempty = 0;</span>
<span>                      iter = iter+2;</span>
<span>                  endif;</span>
<span>                  temp = exposcall("SemUnLock", semid);</span>
<span>              endwhile;</span>
<span>          else</span>
<span>              pidtwo =  exposcall("Fork");</span>
<span>              if(pidtwo == 0) then</span>
<span>                  iter = 2;</span>
<span>                  while(iter <= 100) do</span>
<span>                      temp = exposcall("SemLock", semid);</span>
<span>                      temp = head.isempty;</span>
<span>                      if(temp == 1) then</span>
<span>                          head.data = iter;</span>
<span>                          head.isempty = 0;</span>
<span>                          iter = iter+2;</span>
<span>                      endif;</span>
<span>                      temp = exposcall("SemUnLock", semid);</span>
<span>                  endwhile;</span>
<span>              else</span>
<span>                  iter = 1;</span>
<span>                  while(iter <= 100) do</span>
<span>                      temp = exposcall("SemLock", semid);</span>
<span>                      temp = head.isempty;</span>
<span>                      if(temp == 0) then</span>
<span>                          x = head.data;</span>
<span>                          head.isempty = 1;</span>
<span>                          temp = exposcall("Write",-2, x);</span>
<span>                          iter = iter+1;</span>
<span>                      endif;</span>
<span>                      temp = exposcall("SemUnLock", semid);</span>
<span>                  endwhile;</span>
<span>              endif;</span>
<span>          endif;</span>
<span>          temp = exposcall("Semrelease", semid);</span>
<span>          return 0;</span>
<span>end</span>
<span>}</span>
</pre>
       </div>

</div>



<div class="panel-body" id="test_program_5"  >
              <br><br>
              <hr>
              <br><br>
       <b style="font-size: 20px;">5. Test Program 5</b><br><br>
       <table class="table table-bordered">
                                                    <tr>
                                                        <td><b>Input</b></td>
                                                        <td>Name of a data file (String)</td>
                                                    </tr> 
                                                    <tr>
                                                        <td><b>Output</b></td>
                                                        <td>Content of the given file</td>
                                                    </tr>
                                                  </table>
                                                <p style="text-indent: 0px"><b>Description :</b> The program takes names of data files as input and opens the file first. It then forks to create a child process. The content of the file with shared open instance (shared LSEEK) will be printed to the terminal concurrently by parent and child. To synchronize the use open instance between parent and child a  semaphore is used.</p><br>
<div><pre>
<span>decl</span>
<span>          int i, semid, pid, data, temp, filedis, a;</span>
<span>          string filename;</span>
<span>enddecl</span>
<span>int main()</span>
<span>{</span>
<span>begin</span>
<span>          temp = exposcall("Read",-1,filename);</span>
<span>          filedis = exposcall("Open", "numbers.dat");</span>
<span>          semid = exposcall("Semget");</span>
<span>          pid = exposcall("Fork");</span>
<span>          a = 0;</span>
<span>          data = -1;</span>
<span>          if(pid > 0) then</span>
<span>              while(a != -2)  do</span>
<span>                  temp = exposcall("SemLock", semid);</span>
<span>                  a = exposcall("Read",filedis,data);</span>
<span>                  temp = exposcall("Write",-2,data);</span>
<span>                  temp = exposcall("SemUnLock", semid);</span>
<span>              endwhile;</span>
<span>              temp = exposcall("Semrelease", semid);</span>
<span>          else</span>
<span>              while(a != -2)  do</span>
<span>                  temp = exposcall("SemLock", semid);</span>
<span>                  a = exposcall("Read",filedis,data);</span>
<span>                  temp = exposcall("Write",-2,data);</span>
<span>                  temp = exposcall("SemUnLock", semid);</span>
<span>              endwhile;</span>
<span>              temp = exposcall("Semrelease", semid);</span>
<span>          endif;</span>
<span>          return 0;</span>
<span>end</span>
<span>}</span>
</pre>
       </div>

</div>

<div class="panel-body" id="test_program_6"  >
              <br><br>
              <hr>
              <br><br>
       <b style="font-size: 20px;">6. Test Program 6</b><br><br>
       <table class="table table-bordered">
                                                    <tr>
                                                        <td><b>Input</b></td>
                                                        <td>A file name (String) and permission (Integer)</td>
                                                    </tr> 
                                                    <tr>
                                                        <td><b>Output</b></td>
                                                        <td>Integers from 1 to 100, but not necessarily in sequential order.</td>
                                                    </tr>
                                                  </table>
                                                <p style="text-indent: 0px"><b>Description :</b> The program takes a file name and permission as input and creates a new file with given inputs. It then forks to create two child processes. Similar to Reader-Writer program seen before, the two child processes act as writers and parent as reader. A file open instances is shared between two writers and there is separate open instance of the same file for reader. Two writers will write numbers from 1 to 100 to file - one writer will write even numbers other will write odd numbers and reader will read from the file and print to the console concurrently. To synchronize the use of the shared open instance between two writers a semaphore is used. </p><br>
<div><pre>
<span>int main()</span>
<span>{</span>
<span>decl</span>
<span>          int temp, x, a, pidone, pidtwo, semid, iter, data, permission, fd;</span>
<span>          string filename;</span>
<span>enddecl</span>
<span>begin</span>
<span>          temp=exposcall("Read",-1,filename);</span>
<span>          temp=exposcall("Read",-1,permission);</span>
<span>          temp=exposcall("Create",filename, permission);</span>
<span>          pidone = exposcall("Fork");</span>
<span>          if (pidone != 0 ) then</span>
<span>              fd=exposcall("Open",filename);</span>
<span>              iter=1;</span>
<span>              while(iter <= 100) do</span>
<span>                  a=exposcall("Read",fd, data);</span>
<span>                  if(a!=-2) then</span>
<span>                      temp=exposcall("Write",-2, data);</span>
<span>                      iter=iter+1;</span>
<span>                 endif;</span>
<span>              endwhile;</span>
<span>          else</span>
<span>              semid = exposcall("Semget");</span>
<span>              fd=exposcall("Open",filename);</span>
<span>              pidtwo =  exposcall("Fork");</span>
<span>              if(pidtwo == 0) then</span>
<span>                  iter = 1;</span>
<span>                  while(iter <= 100) do</span>
<span>                      temp = exposcall("SemLock", semid);</span>
<span>                      temp=exposcall("Write",fd, iter);</span>
<span>                      temp = exposcall("SemUnLock", semid);</span>
<span>                      iter=iter+2;</span>
<span>                  endwhile;</span>
<span>              else</span>
<span>                  iter = 2;</span>
<span>                  while(iter <= 100) do</span>
<span>                      temp = exposcall("SemLock", semid);</span>
<span>                      temp=exposcall("Write",fd, iter);</span>
<span>                      temp = exposcall("SemUnLock", semid);</span>
<span>                      iter=iter+2;</span>
<span>                  endwhile;</span>
<span>              endif;</span>
<span>              temp = exposcall("Semrelease", semid);</span>
<span>          endif;</span>
<span>          return 0;</span>
<span>end</span>
<span>}</span>
</pre>
       </div>

</div>

<div class="panel-body" id="test_program_7"  >
              <br><br>
              <hr>
              <br><br>
       <b style="font-size: 20px;">7. Test Program 7 (Extended Shell)</b><br><br>
       <table class="table table-bordered">
                                                    <tr>
                                                        <td><b>Input</b></td>
                                                        <td>Built in shell command/ Name of XSM executable file (String)</td>
                                                    </tr> 
                                                    <tr>
                                                        <td><b>Output</b></td>
                                                        <td>Ouput of corresponding to shell command or executable file.</td>
                                                    </tr>
                                                  </table>
                                                <p style="text-indent: 0px"><b>Description :</b> Shell program given below reads command from console. If the command is halt, then program will invoke Shutdown system call. If the command is built in shell command, then shell will read suitable number of arguments from the console and corresponding system call is invoked from shell itself. If the command is an executable file, shell will fork and exec with the given executable file. </p>
                                                <p>Note that the shell program should fit in 2 blocks/pages provided in <a href="os_implementation.html" target="_blank">disk/memory organization</a>. The program given below is optimized to fits in 2 blocks/pages. In order to optimize the code, the program violates some of the type checkings. Even with type checking errors, the program will still compile and execute correctly. Also some system calls are invoked with arguments, even though the system call does not need any arguments. This will not cause any problem as these arguments will simply be ignored in the corresponding system call. </p><br>
<div><pre>
<span>int main()</span>
<span>{</span>
<span>decl</span>
<span>          int temp, pid, a, flag, retcom;</span>
<span>          string input, username, password;</span>
<span>enddecl</span>
<span>begin</span>
<span>          a=1;</span>
<span>          while(a == 1) do</span>
<span>              temp = exposcall("Write",-2, "---Enter---");</span>
<span>              temp = exposcall("Read",-1, input);</span>
<span>              flag=0;</span>
<span>              if(input == "Logout" OR input == "Shutdown") then</span>
<span>                  flag=1;</span>
<span>              endif;</span>
<span>              if(input == "Remusr" OR input == "Getuid" OR input == "Getuname") then</span>
<span>                  flag=1;</span>
<span>                  temp = exposcall("Read",-1, username);</span>
<span>              endif;</span>
<span>              if(input == "Newusr" OR input == "Setpwd") then</span>
<span>                  flag=1;</span>
<span>                  temp = exposcall("Read",-1, username);</span>
<span>                  temp = exposcall("Read",-1, password);</span>
<span>              endif;</span>
<span>              if(flag==1) then</span>
<span>                  retcom = exposcall(input, username, password);</span>
<span>                  if(retcom < 0) then</span>
<span>                      temp = exposcall("Write",-2, "BAD COMMAND");</span>
<span>                  else</span>
<span>                      if(input == "Getuid" OR input == "Getuname") then</span>
<span>                          temp = exposcall("Write",-2, retcom);</span>
<span>                      endif;</span>
<span>                  endif;</span>
<span>              else</span>
<span>                  pid = exposcall("Fork");</span>
<span>                  if(pid < 0) then</span>
<span>                      temp = exposcall("Write",-2, "Fork Fail");</span>
<span>                      continue;</span>
<span>                  endif;</span>
<span>                  if(pid != 0) then</span>
<span>                      temp = exposcall("Wait",pid);</span>
<span>                  else</span>
<span>                      temp = exposcall("Exec",input);</span>
<span>                      if(temp != 0) then</span>
<span>                          temp = exposcall("Write",-2, "BAD COMMAND");</span>
<span>                          break;</span>
<span>                      endif;</span>
<span>                  endif;</span>
<span>              endif;</span>
<span>          endwhile;</span>
<span>          return 0;</span>
<span>end</span>
<span>}</span>
</pre>
       </div>

</div>



<div class="panel-body" id="test_program_8"  >
              <br><br>
              <hr>
              <br><br>
       <b style="font-size: 20px;">8. Test Program 8 </b><br><br>
       <table class="table table-bordered">
                                                    <tr>
                                                        <td><b>Input</b></td>
                                                        <td>-</td>
                                                    </tr> 
                                                    <tr>
                                                        <td><b>Output </b></td>
                                                        <td>100 integers - PID*100+1 to PID*100+100. </td>
                                                    </tr>
                                                  </table>
                                                <p style="text-indent: 0px"><b>Description :</b> The program given in above link will first create a linked list and write 100 numbers (PID*100+1 to PID*100+100) to the linked list. The linked list is later traversed and numbers are printed to the console. Run this program using the shell.  </p><br>
<div><pre>
<span>type</span>
<span>List</span>
<span>{</span>
<span>          int data;</span>
<span>          List next;</span>
<span>}</span>
<span>endtype</span>
<span>decl</span>
<span>          List head;</span>
<span>enddecl</span>
<span>int main()</span>
<span>{</span>
<span>decl</span>
<span>          int endval, temp, pid, iter;</span>
<span>          List p, q;</span>
<span>enddecl</span>
<span>begin</span>
<span>          temp = exposcall("Heapset");</span>
<span>          head=null;</span>
<span>          q = head;</span>
<span>          pid = exposcall("Getpid");</span>
<span>          iter = pid*100+1;</span>
<span>          endval= iter+99;</span>
<span>          while (iter <= endval)  do</span>
<span>              p= exposcall("Alloc",2);</span>
<span>              p.data=iter;</span>
<span>              p.next=null;</span>
<span>              if (head == null) then</span>
<span>                  head=p;</span>
<span>                  q=p;</span>
<span>              else</span>
<span>                  q.next=p;</span>
<span>                  q=q.next;</span>
<span>              endif;</span>
<span>              iter=iter+1;</span>
<span>          endwhile;</span>
<span>          p=head;</span>
<span>          while(p!=null)  do</span>
<span>              iter=p.data;</span>
<span>              temp= exposcall("Write",-2,iter);</span>
<span>              p=p.next;</span>
<span>          endwhile;</span>
<span>          return 0;</span>
<span>end</span>
<span>}</span>
</pre>
       </div>

</div>


<div class="panel-body" id="test_program_9"  >
              <br><br>
              <hr>
              <br><br>
       <b style="font-size: 20px;">9. Test Program 9 </b><br><br>
       <table class="table table-bordered">
                                                    <tr>
                                                        <td><b>Input</b></td>
                                                        <td>-</td>
                                                    </tr> 
                                                    <tr>
                                                        <td><b>Output </b></td>
                                                        <td>Out of 13 processes created, if N processes complete execution, then N data files each containing 100 consecutive integers (PID-3)*100+1 to PID-3)*100+100 are created. </td>
                                                    </tr>
                                                  </table>
                                                <p style="text-indent: 0px"><b>Description :</b> The program will create a file with name "num.dat" with open permission. Integers 1 to 1300 are written to this file and file is closed. The program will then invoke <i>Fork</i> system call four times, back to back to create 13 processes and Exec system call is invoked with file "pgm1.xsm". The program for "pgm1.xsm" is provided <a href="test_prog.html#test_program_10" target="_blank">here</a>. </p><br>
<div><pre>
<span>int main()</span>
<span>{</span>
<span>decl</span>
<span>          int temp, fd, permission, iter, pid;</span>
<span>          string filename;</span>
<span>enddecl</span>
<span>begin</span>
<span>          filename="num.dat";</span>
<span>          permission=1;</span>
<span>          temp=exposcall("Create",filename,permission);</span>
<span>          fd=exposcall("Open",filename);</span>
<span>          if(fd>=0) then</span>
<span>              iter=1;</span>
<span>              while(iter<=1300) do</span>
<span>                  temp=exposcall("Write",fd, iter);</span>
<span>                  iter=iter+1;</span>
<span>              endwhile;</span>
<span>              temp=exposcall("Close",fd);</span>
<span>              pid=exposcall("Fork");</span>
<span>              pid=exposcall("Fork");</span>
<span>              pid=exposcall("Fork");</span>
<span>              pid=exposcall("Fork");</span>
<span>              temp = exposcall("Exec","pgm1.xsm");</span>
<span>          else</span>
<span>              temp=exposcall("Write",-2, "OPEN FAIL");</span>
<span>          endif;</span>
<span>          return 0;</span>
<span>end</span>
<span>}</span>
</pre>
       </div>

</div>

<div class="panel-body" id="test_program_10"  >
              <br><br>
              <hr>
              <br><br>
       <b style="font-size: 20px;">10. Test Program 10 </b><br><br>
       <table class="table table-bordered">
                                                    <tr>
                                                        <td><b>Input</b></td>
                                                        <td>-</td>
                                                    </tr> 
                                                    <tr>
                                                        <td><b>Output (For each 13 proceesses)</b></td>
                                                        <td>A file will be created containing 100 consecutive numbers (PID-3)*100+1 to (PID-3)*100+100  </td>
                                                    </tr>
                                                  </table>
                                                <p style="text-indent: 0px"><b>Description :</b> This program can not be run individualy. The test program 9 will invoke Exec with below given program with name "pgm1.xsm". Make sure to compile and save this program as "pgm1.xsm". Below given program will create a new file according to the PID of the process and read 100 numbers from file "num.dat" from offset (PID-3)*100 to (PID-3)*100+99 and write to newly created file. After successful execution, there should be 13 data files each containing 100 consecutive numbers (PID-3)*100+1 to PID-3)*100+100.</p><br>
<div><pre>
<span>int main()</span>
<span>{</span>
<span>decl</span>
<span>          int temp, fdread, fdwrite, permission, pid, offset, data, iter;</span>
<span>          string filename;</span>
<span>enddecl</span>
<span>begin</span>
<span>          pid=exposcall("Getpid");</span>
<span>          if(pid==3) then</span>
<span>              filename="3.dat";</span>
<span>          endif;</span>
<span>          if(pid==4) then</span>
<span>              filename="4.dat";</span>
<span>          endif;</span>
<span>          if(pid==5) then</span>
<span>              filename="5.dat";</span>
<span>          endif;</span>
<span>          if(pid==6) then</span>
<span>              filename="6.dat";</span>
<span>          endif;</span>
<span>          if(pid==7) then</span>
<span>              filename="7.dat";</span>
<span>          endif;</span>
<span>          if(pid==8) then</span>
<span>              filename="8.dat";</span>
<span>          endif;</span>
<span>          if(pid==9) then</span>
<span>              filename="9.dat";</span>
<span>          endif;</span>
<span>          if(pid==10) then</span>
<span>              filename="10.dat";</span>
<span>          endif;</span>
<span>          if(pid==11) then</span>
<span>              filename="11.dat";</span>
<span>          endif;</span>
<span>          if(pid==12) then</span>
<span>              filename="12.dat";</span>
<span>          endif;</span>
<span>          if(pid==13) then</span>
<span>              filename="13.dat";</span>
<span>          endif;</span>
<span>          if(pid==14) then</span>
<span>              filename="14.dat";</span>
<span>          endif;</span>
<span>          if(pid==15) then</span>
<span>              filename="15.dat";</span>
<span>          endif;</span>
<span></span>
<span>          permission=1;</span>
<span>          temp=exposcall("Create",filename,permission);</span>
<span>          fdwrite=exposcall("Open",filename);</span>
<span>          fdread=exposcall("Open","num.dat");</span>
<span>          if(fdread>=0 AND fdwrite>=0) then</span>
<span>              offset=(pid-3)*100;</span>
<span>              temp=exposcall("Seek",fdread,offset);</span>
<span>              iter=0;</span>
<span>              while(iter<100) do</span>
<span>                  temp=exposcall("Read",fdread, data);</span>
<span>                  temp=exposcall("Write",fdwrite, data);</span>
<span>                  iter=iter+1;</span>
<span>              endwhile;</span>
<span>              temp=exposcall("Close",fdread);</span>
<span>              temp=exposcall("Close",fdwrite);</span>
<span>          else</span>
<span>              temp=exposcall("Write",-2, "OPEN FAIL");</span>
<span>          endif;</span>
<span>          return 0;</span>
<span>end</span>
<span>}</span>
</pre>
       </div>

</div>


<div class="panel-body" id="test_program_11"  >
              <br><br>
              <hr>
              <br><br>
       <b style="font-size: 20px;">11. Test Program 11 </b><br><br>
       <table class="table table-bordered">
                                                    <tr>
                                                        <td><b>Input</b></td>
                                                        <td> -              </td>
                                                    </tr> 
                                                    <tr>
                                                        <td><b>Output </b></td>
                                                        <td> Out of 13 processes created, if N processes complete execution, then N data files each containing 100 consecutive integers from X*1000+1  to X*1000+100 (where X &isin; {3,4..15}) are created.  </td>
                                                    </tr>
                                                  </table>
                                                <p style="text-indent: 0px"><b>Description :</b> The program will create a file with name "numbers.dat" with open permission and open the file. The program also invokes Semget to acquire a shared semaphore. The program will then invoke <i>Fork</i> system call four times, back to back to create 13 processes. The 13 processes now share a file open instance and a semaphore. Each process will write 100 numbers consecutatively (PID*1000+1 to PID*1000+100) to the file "numbers.dat". Exec system call is invoked with file "pgm2.xsm". The program for "pgm2.xsm" is provided <a href="test_prog.html#test_program_12" target="_blank">here</a>. </p><br>
<div><pre>
<!--<span>type</span>
<span>Share</span>
<span>{</span>
<span>          int count;</span>
<span>}</span>
<span>endtype</span>-->
<span>decl</span>
<span>          int fd, temp, permission, data, semid, iter, pid, endval, count;</span>
<span>          string filename;</span>
<!--<span>          Share numbers;</span>-->
<span>enddecl</span>
<span>int main()</span>
<span>{</span>
<span>begin</span>
<span>        filename="numbers.dat";</span>
<span>        permission=1;</span>
<span>        temp = exposcall("Create",filename, permission);</span>
<span>        semid = exposcall("Semget");</span>
<!--<span>        temp = exposcall("Heapset");</span>
<span>        numbers= exposcall("Alloc",1);</span>
<span>        numbers.count=0;</span>-->
<span>        fd=exposcall("Open",filename);</span>
<span>        if(fd>=0) then</span>
<span>            pid=exposcall("Fork");</span>
<span>            pid=exposcall("Fork");</span>
<span>            pid=exposcall("Fork");</span>
<span>            pid=exposcall("Fork");</span>
<span>            if(pid<0) then</span>
<span>                temp=exposcall("Write", -2, "NO PCB");</span>
<span>            endif;</span>
<span>            pid=exposcall("Getpid");</span>
<span>            data=pid*1000+1;</span>
<span>            endval=data+99;</span>
<span>            temp=exposcall("SemLock", semid);</span>
<span>            while(data<=endval) do</span>
<span>                temp=exposcall("Write",fd, data);</span>
<span>                data=data+1;</span>
<span>            endwhile;</span>
<!--<span>            numbers.count=numbers.count+100;</span>-->
<span>            temp=exposcall("SemUnLock", semid);</span>
<span>            temp=exposcall("Close",fd);</span>
<span>        else</span>
<span>            temp=exposcall("Write",-2, "OPEN FAIL");</span>
<span>        endif;</span>
<!--<span>        iter=1;</span>
<span>        while(iter==1) do</span>
<span>            temp=exposcall("SemLock", semid);</span>
<span>            count=numbers.count;</span>
<span>            temp=exposcall("SemUnLock", semid);</span>
<span>            if(count==1300) then</span>-->
<span>        temp=exposcall("Exec", "pgm2.xsm");</span>
<!--<span>            endif;</span>
<span>        endwhile;</span>--> 
<span>        return 0;</span>
<span>end</span>
<span>}</span>
</pre>
       </div>

</div>


<div class="panel-body" id="test_program_12"  >
              <br><br>
              <hr>
              <br><br>
       <b style="font-size: 20px;">12. Test Program 12 </b><br><br>
       <table class="table table-bordered">
                                                    <tr>
                                                        <td><b>Input</b></td>
                                                        <td>-</td>
                                                    </tr> 
                                                    <tr>
                                                        <td><b>Output (For each 13 proceesses)</b></td>
                                                        <td>A file will be created containing 100 consecutive numbers from data file "numbers.dat". </td>
                                                    </tr>
                                                  </table>
                                                <p style="text-indent: 0px"><b>Description :</b>  This program can not be run individualy. Test program 11 will invoke Exec with below given program with name "pgm2.xsm". Make sure to compile and save this program as "pgm2.xsm". Below given program will create a new file according to the PID of the process and read 100 numbers from file "numbers.dat" from offset (PID-3)*100 to (PID-3)*100+99 and write to newly created file. After successful execution, there should be 13 data files each containing 100 numbers each X*1000 -X*1000+99, where X=[3,4..15]. The numbers written by a process in the newly created file need not be the same numbers the process has written in "numbers.dat" file.</p><br>
<div><pre>
<span>decl</span>
<span>          int data;</span>
<span>          int fdread, fdwrite, temp, permission, offset, pid, iter;</span>
<span>          string filename, newfile;</span>
<span>enddecl</span>
<span>int main()</span>
<span>{</span>
<span>begin</span>
<span>          fdread=exposcall("Open", "numbers.dat");</span>
<span>          pid=exposcall("Getpid");</span>
<span>          if(pid==3) then</span>
<span>              newfile="three.dat";</span>
<span>          endif;</span>
<span>          if(pid==4) then</span>
<span>              newfile="four.dat";</span>
<span>          endif;</span>
<span>          if(pid==5) then</span>
<span>              newfile="five.dat";</span>
<span>          endif;</span>
<span>          if(pid==6) then</span>
<span>              newfile="six.dat";</span>
<span>          endif;</span>
<span>          if(pid==7) then</span>
<span>              newfile="seven.dat";</span>
<span>          endif;</span>
<span>          if(pid==8) then</span>
<span>              newfile="eight.dat";</span>
<span>          endif;</span>
<span>          if(pid==9) then</span>
<span>              newfile="nine.dat";</span>
<span>          endif;</span>
<span>          if(pid==10) then</span>
<span>              newfile="ten.dat";</span>
<span>          endif;</span>
<span>          if(pid==11) then</span>
<span>              newfile="eleven.dat";</span>
<span>          endif;</span>
<span>          if(pid==12) then</span>
<span>              newfile="twelve.dat";</span>
<span>          endif;</span>
<span>          if(pid==13) then</span>
<span>              newfile="thirteen.dat";</span>
<span>          endif;</span>
<span>          if(pid==14) then</span>
<span>              newfile="fourteen.dat";</span>
<span>          endif;</span>
<span>          if(pid==15) then</span>
<span>              newfile="fifteen.dat";</span>
<span>          endif;</span>
<span>          temp=exposcall("Create", newfile, 1);</span>
<span>          fdwrite=exposcall("Open", newfile);</span>
<span>          if(fdread>=0 AND fdwrite>=0) then</span>
<span>              offset=(pid-3)*100;</span>
<span>              temp=exposcall("Seek",fdread, offset);</span>
<span>              iter=0;</span>
<span>              while(iter<=99) do</span>
<span>                    temp=exposcall("Read",fdread, data);</span>
<span>                    temp=exposcall("Write",fdwrite, data);</span>
<span>                    iter=iter+1;</span>
<span>              endwhile;</span>
<span>              temp=exposcall("Close",fdread);</span>
<span>              temp=exposcall("Close",fdwrite);</span>
<span>          else</span>
<span>              temp=exposcall("Write",-2, "OPEN FAIL");</span>
<span>          endif;</span>
<span></span>
<span>          return 0;</span>
<span>end</span>
<span>}</span>
</pre>
       </div>

</div>


       </div>
       </div>
    </section>
    

    
          
          
    <!--=========== END SECTION ================-->

  

 

     <!--=========== BEGIN FOOTER ================-->
     <footer id="footer">
       <div class="container">
         <div class="row">
           <div class="col-lg-6 col-md-6 col-sm-6">
             <div class="footer_left">
               <p><a href="http://www.nitc.ac.in/">National Institute of Technology, Calicut</a></p>
             </div>
           </div>
         </div>
       </div>
      </footer>
      <!--=========== END FOOTER ================-->

     <!-- Javascript Files
     ================================================== -->
  
     <!-- initialize jQuery Library -->
    <script src="js/jquery.min.js"></script>
    <!-- Google map -->
    <script src="js/map_js.js"></script>
    <script src="js/jquery.ui.map.js"></script>
     <!-- For smooth animatin  -->
    <script src="js/wow.min.js"></script> 
    <!-- Bootstrap js -->
    <script src="js/bootstrap.min.js"></script>
    <!-- superslides slider -->
    <script src="js/jquery.superslides.min.js" type="text/javascript"></script>
    <!-- slick slider -->
    <script src="js/slick.min.js"></script>    
    <!-- for circle counter -->
    <script src='js/jquery.circliful.min.js'></script>
    <!-- for portfolio filter gallery -->
    <script src="js/modernizr.custom.js"></script>
    <script src="js/classie.js"></script>
    <script src="js/elastic_grid.min.js"></script>
    <script src="js/portfolio_slider.js"></script>

    <!-- Custom js-->
    <script src="js/custom.js"></script>
  </body>
</html>
