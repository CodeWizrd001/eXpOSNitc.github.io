<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Basic Page Needs
    ================================================== -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <title>Roadmap</title>

    <!-- Mobile Specific Metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="img/favicon.jpg"/>

    <!-- CSS
    ================================================== -->       
    <!-- Bootstrap css file-->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Font awesome css file-->
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <!-- Superslide css file-->
    <link rel="stylesheet" href="css/superslides.css">
    <!-- Slick slider css file -->
    <link href="css/slick.css" rel="stylesheet"> 
    <!-- smooth animate css file -->
    <link rel="stylesheet" href="css/animate.css">  
    <!-- Elastic grid css file -->
    <link rel="stylesheet" href="css/elastic_grid.css"> 
    <!-- Circle counter cdn css file -->
    <link rel='stylesheet prefetch' href='css/jquery.circliful.css'>    
    <!-- Default Theme css file -->
    <link id="orginal" href="css/themes/eucalyptus-theme.css" rel="stylesheet">
    <!-- Main structure css file -->
    <link href="style.css" rel="stylesheet">

   
    <!-- Google fonts -->
    <link href='css/opensans.css' rel='stylesheet' type='text/css'>
    <link href='css/varela.css' rel='stylesheet' type='text/css'>
    <link href='css/montserrat.css' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  
    <style>
    .custom-badge {
        background:#26A65B;
        font-size:20px;
    }
    .custom-badge:hover{
        background:#000000;
    }

    .custom-panel{
      background:#dff0d8;
      border-radius:4px;
      padding:2px;
      height:90px;
    }
    .custom-panel2{
      background:#dff0d8;
      border-radius:4px;
      padding:2px;
    }
    .well{
      height:130px;

    }
  
    </style>


  </head>
  <body>
   
  <!-- BEGIN PRELOADER -->
    <div id="preloader">
      <div id="status">&nbsp;</div>
    </div>
    <!-- END PRELOADER -->   

  
    <!--=========== BEGIN HEADER SECTION ================-->
    <header id="header">
      <!-- BEGIN MENU -->
      <div class="menu_area">
        <nav class="navbar navbar-default navbar-fixed-top past-main" role="navigation"> 
          <div class="container">
          <div class="navbar-header">
            <!-- FOR MOBILE VIEW COLLAPSED BUTTON -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            <!-- LOGO -->

            <!-- TEXT BASED LOGO -->
            <a class="navbar-brand" href="index.html">eXpOS<span>NITC</span></a>
            
                              
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul id="top-menu" class="nav navbar-nav navbar-right main_nav">
              <li><a href="./index.html">Home</a></li>
              <li><a href="./documentation.html" target="_blank">Documentation</a></li> 
              <li><a href="./Roadmap.html" target="_blank">Roadmap</a></li>
               <li><a href="Downloads.html" target="_blank">Downloads</a></li> <!--Change here--> 
               <li><a href="faq.html" target="_blank">FAQ</a></li>
              <li><a href="About_us.html" target="_blank">About Us</a></li>                                     
            </ul>           
          </div>
          </div>     
        </nav>  
      </div>
      <!-- END MENU -->

      
    </header>
		<!--=========== End HEADER SECTION ================--> 
      
    <!--=========== Intoduction Section Begining ===============-->
    <!--heading of the page---->
    <div class="container" style="margin-top: 80px;">
      
      <h1>Roadmap</h1>
    </div>           

    <!-- Arrow to top section  -->

    <div class="up grid col-one-third" style="float:right;position: fixed;bottom: 10vh;right: 2vw;">
      <a href="#navtop" title="Go back up"> <span style="color:grey">Top &uarr;</span></a>
    </div>


    <section id="about" style="text-align:justify">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 col-md-12">
            <div class="heading">
              <div>
                <h2 id="navtop">Using the Roadmap</h2>
                <br>
                <br>
                <p>This roadmap is divided into stages. Each stage is to be done in sequential order. You will build eXpOS incrementally. Links are provided throughout the document for further reference. There are two kinds of links. The contents of the <b style="color:#26A65B">important links</b> must be read immediately before proceeding with the roadmap. The <span style="color:#26A65B">informative links</span> may be clicked for more information about a particular concept. However this information may not be necessary at that point and you may proceed with the roadmap without visiting these links.</p>
              
                <div class="container-fluid">
                <div class="row-fluid">
                
                <div class="col-sm-3 well">
                <div class="text-center custom-panel" id="stage1">
                <span class="label custom-badge blink"  id="stage1">1</span>
                <h4>Setting up the System</h4>
                </div>
                </div>

                <div class="col-sm-3 well">
                <div class="text-center custom-panel" id="stage2">
                <span class="label custom-badge" id="stage2">2</span>
                <h4>Understanding the File System</h4>
                </div>
                </div>
                
                <div class="col-sm-3 well">
                <div class="text-center custom-panel" id="stage3">
                <span class="label custom-badge" id="stage3">3</span>
                <h4>Bootstrap Loader</h4>    
                </div>
                </div>

                <div class="col-sm-3 well">
                <div class="text-center custom-panel" id="stage4">
                <span class="label custom-badge" id="stage4">4</span>
                <h4>Learning the SPL Language</h4>                
                </div>
                </div>

                <div class="col-sm-3 well">
                <div class="text-center custom-panel" id="stage5">
                <span class="label custom-badge" id="stage5">5</span>
                <h4>Debugging in Kernel mode</h4>                
                </div>
                </div>

                <div class="col-sm-3 well">
                <div class="text-center custom-panel" id="stage6">
                <span class="label custom-badge" id="stage6">6</span>
                <h4>Running a User program</h4>                
                </div>
                </div>
                <div class="col-sm-3 well">
                <div class="text-center custom-panel" id="stage7">
                <span class="label custom-badge" id="stage7">7</span>
                <h4>User program with Interrupts</h4>                
                </div>
                </div>
                <div class="col-sm-3 well">
                <div class="text-center custom-panel" id="stage8">
                <span class="label custom-badge" id="stage8">8</span>
                <h4>Creating a data file</h4>                
                </div>
                </div>
                <div class="col-sm-3 well">
                <div class="text-center custom-panel" id="stage9">
                <span class="label custom-badge" id="stage9">9</span>
                <h4>Opening and Reading a data file</h4>                
                </div>
                </div>

                
                </div>
                </div>


                  <!--========= Stage descrptions starts here ==========-->

                  <div class="panel-group" id="accordion">
                    <div class="panel panel-default">

                      <!-- Stage 1 -->

                      <div class="panel-heading" id="list_stage1">
                        <h4 class="panel-title">
                          <a data-toggle="collapse"  href="#collapse1"><span class="fa fa-check-square-o"></span>Stage 1 : Setting up the System </a>
                        </h4>
                      </div>

                      <div id="collapse1" class="panel-collapse collapse">
                        <div class="panel-body">

                          <!-- Begin Learning Objectives-->
                          <div class="container col-md-12">
                          <div class="section_area">
                          <ul class="list-group">
                           <li class="list-group-item" style="background:#dff0d8">
                            <span class="fa fa-book"></span> &nbsp; <a data-toggle="collapse"  href="#lo1">Learning Objectives</a>
                            <div id="lo1" class="panel-collapse expand">
                            <span class="fa fa-hand-o-right"></span>&nbsp;&nbsp; At the end of this experiment, you
                            will learn how to set up the environment to build eXpOS.                                     
                                     
                            </div>
                          </li>
                          </ul>
                          </div>
                          </div>
                          <!-- End Learning Objectives-->

		<div style="font-size:15px">
                  <ol>
                    <li> Download the complete eXpOS package from <a href="https://github.com/eXpOSNitc/eXpOSNitc.github.io/raw/master/package/expos.tar.gz" download>here</a>.</li>
                    <li> Copy the tar file to your home directory. 
                    <pre>cp expos.tar.gz $HOME/<br>cd $HOME</pre></li>
                    <li> Extract the contents using the command. 
                    <pre>tar -xvf expos.tar.gz </pre>
                    Now you will have a directory <tt>myexpos</tt> in your home drectory, with all components required for building your own eXpOS.</li>
                    <li> Install libreadline-dev package <pre>sudo apt-get install libreadline-dev </pre></li>
                    <li> Make sure all the prerequisites which include <b>gcc</b>, <b>flex/lex</b> and <b>bison/yacc</b> are installed. 
                    In Ubuntu/Debian systems, use <b>apt</b> to install flex and bison.
                    <pre>sudo apt-get install flex bison </pre></li>  
                    <li> Change directory to <tt>myexpos</tt> directory.
                    <pre>cd $HOME/myexpos </pre> </li>  
                    <li> Make to build all the components.
                    <pre>./make </pre></li>          
                  </ol>
                </div>

                          <p>
                            After the setting up of the system is done correctly the following directories will be created. 
                          </p> 
                          
                          <div><img src="./img/xsm_folders.png"></div>
                          <br/>

                          <p><b style="color:#26A65B">Assignment : </b> Read and understand the <a href="os_spec-files/eXpFS.html" target="_blank">Filesystem (eXpFS) Specification</a> and <a href="./support_tools-files/xfs-interface.html" target="_blank">XFS-Interface Specification</a> (interface between the UNIX System and eXpFS)</p>

                          </div>
                      </div>

                      <!-- Stage 2 -->

                      <div class="panel-heading" id="list_stage2">
                        <h4 class="panel-title">
                          <a data-toggle="collapse"  href="#collapse2"><span class="fa fa-check-square-o"></span>Stage 2 : Understanding the Filesystem  </a>
                        </h4>
                      </div>

                      <div id="collapse2" class="panel-collapse collapse">
                        <div class="panel-body">

                        <!-- Begin Learning Objectives-->
                          <div class="container col-md-12">
                          <div class="section_area">
                          <ul class="list-group">
                           <li class="list-group-item" style="background:#dff0d8">
                            <span class="fa fa-book"></span> &nbsp; <a data-toggle="collapse"  href="#lo2">Learning Objectives</a>
                            <div id="lo2" class="panel-collapse expand">
                            <ul>
                              <li><span class="fa fa-hand-o-right"></span>&nbsp;&nbsp; Load/retrieve data and executable files from/to your host (Unix) system into the XSM disk.</li>
                              <li><span class="fa fa-hand-o-right"></span>&nbsp;&nbsp; Explain the disk data structures of the XFS file system - INODE table, disk free list and root file.</li>
                              <li><span class="fa fa-hand-o-right"></span>&nbsp;&nbsp; Find out the data blocks into which a data/executable file is stored in the XSM disk by examining  the INODE table and root file.</li>
                            </ul>                                  
                                     
                            </div>
                          </li>
                          </ul>
                          </div>
                          </div>
                          <!-- End Learning Objectives-->

                      

                            
                          <p>
                            The <a href="os_spec-files/eXpFS.html" target="_blank"><b>eXperimental Filesystem (eXpFS)</b></a> is a simulated filesystem. A UNIX file named "disk.xfs" simulates the <a href="./arch_spec-files/machine_organisation.html" target="_blank"><b>hard disk</b></a> of the XSM machine. Building eXpOS begins with understanding the underlying filesystem (eXpFS) and its interface <a href="./support_tools-files/xfs-interface.html" target="_blank">(xfs-interface)</a> to the host (UNIX) environment. The xfs-interface is used for transferring files between your linux system and the xsm disk.
                            </p>
                            <br>
                            <figure><img src="img/Kernel_Module.png" style="display:block;margin-left:auto;margin-right:auto"></img>
                            <figcaption style="text-align:center">Schematic interface between linux system and XSM disk</figurecaption>
                            </figure>
                            <br>
                            <i> In this stage, you will create a text file and load it to the XFS disk using xfs-interface.</i>
                            <br/><br/>
			
                          <ol style="list-style-type:decimal;margin-left:2px">
                            <li>
                              Run the XFS Interface<br><br>
                              <div>
                                <pre>cd $HOME/myexpos/xfs-interface
./xfs-interface</pre>
                              </div>
                              This will take you to the xfs-interface prompt. 
                            </li>
                            <br/>
                      
                            <li>
                              Start by formatting the disk to the eXpOS file system format in the XFS interface using <b>fdisk</b> command. <br/> <br/> 
                              The <i>fdisk</i> command converts the raw disk into the filesystem format recognised by the eXpOS operating system. It initialises the disk data structures such as <a href="http://exposnitc.github.io/os_design-files/disk_ds.html" target="_blank">disk free list, inode table, user table and root file </a> .<br/></br>
                              Type the following commands in the xfs-interface prompt.
                              <br><br>
                              <div> 
                                <pre># fdisk 
# exit</pre>
                              </div>

                              You will be back in the UNIX shell and a file named <b>disk.xfs</b> is created in the location <b>$HOME/myexpos/xfs-interface/</b>. This UNIX file simulates the hard disk of the XSM machine. The disk is formatted to eXperimental File System (eXpFS) (see <a href="os_spec-files/eXpFS.html" target="_blank"> eXpFS Specification</a>). <br/> <br/>

                              The XSM machine's disk is a sequence of 512 blocks, each block capable of holding
                              512 words (see <a href="os_implementation.html" target="_blank">Disk Organization</a>).  The second block of the formatted disk contains a disk free list which is explained below.
                            </li>
                            <br/>
                            <li>
                              The <a href="os_design-files/disk_ds.html#disk_free_list" target="_blank">Disk Free List</a> in XFS is a data structure which keeps track of used and unused blocks in the disk. An unused block is indicated by 0 and a used block is indicated by 1. Check the contents of the Disk Free List after formatting the disk. Use the <b>df</b> command to view the Disk Free List (stored in disk block number 2). The output will be as follows: 
                              <br><br>
                              <div>   
                                <pre>
0    -   1  
1    -   1  
2    -   1  
3    -   1  
4    -   1  
5    -   1  
6    -   1  
7    -   1  
8    -   1  
9    -   1  
10   -   1  
11   -   1  
12   -   1  
13   -   1  
14   -   1  
15   -   1  
16   -   1  
17   -   1  
18   -   1  
19   -   1
20   -   1
21   -   1
22   -   1
23   -   1
24   -   1
25   -   1
.
.
No of Free Blocks = 443
Total No of Blocks = 512</pre>
                              </div>
                              The first 69 blocks (blocks 0 to 68) are reserved for <a href="./os_design.html"  target="_blank">Disk Structures</a>, <a href="./os_design.html"  target="_blank">OS routines</a>, <a href="./os_design-files/misc.html#shell"  target="_blank">Shell Code</a>, <a href="./os_design-files/misc.html#idle"  target="_blank">Idle Code</a> and <a href="http://exposnitc.github.io/os_design-files/misc.html#login" target="_blank">INIT program</a> (see <a href="os_implementation.html" target="_blank">Disk Organization)</a>. Hence it is marked as 1 (used) and the remaining entries for blocks 69 to 511 are 0 (unused). 
                            </li>

                            <br>
                            <li>Create a file in your UNIX machine with sample data. A sample data file is given below:
                              <br><br>
                              <div>
                                <pre>There is a place where the sidewalk ends
And before the street begins,
And there the grass grows soft and white,
And there the sun burns crimson bright,
And there the moon-bird rests from his flight
To cool in the peppermint wind.</pre>
                              </div>
                              Save the file as <b>$HOME/myexpos/sample.dat</b>
                            </li>

                            <br>
                            <li> Load this data file <tt>($HOME/myexpos/sample.dat)</tt> to the XFS disk from your UNIX machine.  This can be done by the following commands:
                              <br><br>
                              <div> 
                                <pre>cd $HOME/myexpos/xfs-interface
./xfs-interface</pre>
                              </div>
                              This will take you to the xfs-interface prompt. Type the following commands.
                              <br><br>
                              <div> 
                                <pre># load --data $HOME/myexpos/sample.dat</pre>
                              </div>
                              This will load the file to the XFS disk and the following updations happen in disk data structures :
                              <ol style="list-style-type:lower-roman;margin-left:60px">
                                <li>
                                  A disk block will be allocated for the file (as <tt>sample.dat</tt> contains less than 512 words) and corresponding to this allocated block (here block 69 - this is because the 1<sup>st</sup> free block is allocated by the allocator), an entry will be marked as 1 (used) in the <a href="os_design-files/disk_ds.html#disk_free_list" target="_blank">Disk Free List</a>.
                                </li>
                                <li>
                                  An entry in the <a href="os_design-files/disk_ds.html#inode_table"  target="_blank"> Inode Table</a> will be created for this file. Inode Table contains information such as the file type, file name, file size, userid, permission and the block numbers of the data blocks of the file. The <a href="http://exposnitc.github.io/os_spec-files/multiuser.html" target="_blank">owner</a> of data files loaded through <i>xfs-interface</i> is the <i>root</i>. Userid is the index of the user entry in the <a href="http://exposnitc.github.io/os_design-files/disk_ds.html#user_table">User Table</a>. The userid of <i>root</i> is 1 and hence the userid field in the <i>inode table</i> is set to 1 for all data files loaded through the <i>xfs interface</i>. The <a href="http://exposnitc.github.io/os_spec-files/multiuser.html" target="_blank">permission</a> is set to open(1). Note that any file in eXpFS file system is permitted to have a maximum of four data blocks.
                                </li>
                                <li>
                                  An entry for this file will be made in the <a href="os_design-files/disk_ds.html#root_file"  target="_blank">Root File</a> also.
                                </li>
                              </ol>
                              <br>
                              Before proceeding further you must be clear about  <a href="os_spec-files/eXpFS.html" target="_blank"><b>eXpFS (eXperimental File System)</b></a>. In the following steps we will see the above mentioned updations.
                            </li> 

                            <br>
                            <li> Find out the block numbers of the Data Blocks corresponding to the loaded file. Use the <b>copy</b> command to copy the <i>Inode Table</i>(Inode Table is stored in disk blocks 3 and 4) to a UNIX file (say <tt>$HOME/myexpos/inode_table.txt</tt>).
                            <br><br>
                            <div>
                              <pre># copy 3 4 $HOME/myexpos/inode_table.txt
# exit</pre>
                            </div>

                            <code>Note: </code> The Inode table occupies only the first 960 words (60 entries, each of size 16 words) in the disk blocks 3 and 4. <a href="./os_design-files/disk_ds.html#user_table" target="_blank">User table </a>occupies the next 32 words (16 entries, each of size 2 words) and the last 32 words are reserved for future use. (You will learn about User Table later on).
                            
                            <br/>

                            <br>
                            Now check the Inode table entry for the file <tt>sample.dat</tt> in the UNIX file <tt>inode_table.txt</tt> and find the block numbers of its data blocks. The contents of the file <tt>inode_table.txt</tt> will be as follows: <br><br>
                            <div>
                              <pre>
1
root
512
-1
-1
-1
-1
-1
5
-1
-1
-1
-1
-1
-1
-1
2
sample.dat
512
-1
-1
-1
-1
-1
69
-1
-1
-1
-1
-1
-1
-1
-1
.
.
.

                              </pre>


                              <code>Note: </code> Instead of using the <tt>copy</tt> command you can use <a href="./support_tools-files/xfs-interface.html#dump" target="_blank"><tt>dump</tt></a> command provided by the XFS interface to directly copy the disk data structures (inode table, root file) to the UNIX machine as shown below. <br/>
                              <pre># dump --inodetable</pre>
                            </div>
                            

                            </li>

                            <br>
                            <li> Now check the contents of the disk free list and verify that the entry for the 69<sup>th</sup> block is marked as used. This corresponds to the Data Block 1 of <tt>sample.dat</tt>. 
                            </li>
                            
                            <br>
                            <li>
                              Copy the data blocks from the XFS disk and display it as a UNIX file <tt>$HOME/myexpos/data.txt</tt>. 
                              <br><br>
                              <div>
                                <pre># copy 69 69 $HOME/myexpos/data.txt</pre>
                              </div>    
                              You will get back the contents of the file <tt>$HOME/myexpos/sample.dat</tt> in <tt>$HOME/myexpos/data.txt</tt>. However in <tt>$HOME/myexpos/data.txt</tt>, each word is displayed in a line because a word in XFS is 16 characters long. Sample <tt>data.txt</tt> file is shown below.
                              <br><br>
                              <div>
                                <pre>There is a plac
e where the sid
ewalk ends

And before the 
street begins,

And there the g
rass grows soft
 and white,

And there the s
un burns crimso
n bright,

And there the m
oon-bird rests 
from his flight


To cool in the 
peppermint wind</pre></div>

                            </li> 
                            <br/>
                            <li> xfs-interface provides the <a href="./support_tools-files/xfs-interface.html#export" target="_blank">export</a> command  to export files from the XSM machine to the UNIX machine in a single step. Export the file <tt>sample.dat</tt> to the UNIX file <tt>$HOME/myexpos/data.txt</tt> using <i>xfs-inteface</i> as shown below and verify that the contents are same as that in step 8.
                              <br><br>
                              <div>
                                <pre># export sample.dat $HOME/myexpos/data.txt</pre>
                              </div>
                            </li>
                          </ol>

                          
                          <!--=========== BEGIN contents SECTION ================-->
                          <div class="container col-md-12">
                          <div class="section_area">
                          <ul class="list-group">
                           <li class="list-group-item">
                            <a data-toggle="collapse"  href="#collapseq1"><b>Q1.</b> When a file is created entries are made in the Inode table as well as the Root file. What is the need for this duplication?</a>
                            <div id="collapseq1" class="panel-collapse collapse">
                                          Inode table is a data structure which is accessible only in Kernel mode, whereas Root file is accessible both in Kernel and User mode. This enables the user to search for a file from an application program itself by reading the Root file.                                             
                                     
                            </div>
                          </li>
                          </ul>
                          </div>
                          </div>

                          <p><b style="color:#26A65B">Assignment 1 : </b> Copy the contents of Root File (from Block 5 of XFS disk) to a UNIX file <tt>$HOME/myexpos/root_file.txt</tt> and verify that an entry for <tt>sample.dat</tt> is made in it also.</p>
                          <p><b style="color:#26A65B">Assignment 2 : </b> Delete the <tt>sample.dat</tt> from the XSM machine using xfs-interface and note the changes for the entries for this file in <i>inode table, root file and disk free list</i> .</p>
                          <p><b style="color:#26A65B">Assignment 3 : </b> Read and understand <a href="http://exposnitc.github.io/arch_spec-files/machine_organisation.html" target="_blank">Machine Organisation</a> .</p>    
                          <p><b style="color:#26A65B">Assignment 4 : </b> Read and understand <a href="http://exposnitc.github.io/arch_spec-files/instruction_set.html" target="_blank">XSM Instruction set</a>.</p>                
                       </div>
                      </div>

                      <!-- Stage 3 -->

                      <div class="panel-heading" id="list_stage3">
                        <h4 class="panel-title">
                          <a data-toggle="collapse"  href="#collapse3"><span class="fa fa-check-square-o"></span>Stage 3 : Bootstrap Loader</a>
			</h4>
			</div>
			<div id="collapse3" class="panel-collapse collapse">
                        <div class="panel-body">
                                                  <!-- Begin Learning Objectives-->
                          <div class="container col-md-12">
                          <div class="section_area">
                          <ul class="list-group">
                           <li class="list-group-item" style="background:#dff0d8">
                            <span class="fa fa-book"></span> &nbsp; <a data-toggle="collapse"  href="#lo3">Learning Objectives</a>
                            <div id="lo3" class="panel-collapse expand">
                            <ul>
                              <li><span class="fa fa-hand-o-right"></span>&nbsp;&nbsp; Use the XSM Instruction set to write a small <i>OS startup</i> code.</li>
                              <li><span class="fa fa-hand-o-right"></span>&nbsp;&nbsp; Load your <i>OS startup code</i> into the <i>boot block</i> of the disk and get this code executed on bootstrap.</li>
                            </ul>                                  
                                     
                            </div>
                          </li>
                          </ul>
                          </div>
                          </div>
                          <!-- End Learning Objectives-->
			    <p>
                            When the XSM machine is started up, the <a href="arch_spec-files/machine_organisation.html#Boot ROM" target="_blank"> ROM Code</a>, which resides in page 0 of the memory, is executed. It is hard-coded into the machine. That is, the ROM code at physical address 0 (to 511) is "already there" when machine starts up. The ROM code is called the "Boot ROM" in OS literature. Boot ROM code does the following operations :
                            <ol style="list-style-type:decimal;margin-left:10vw">
                              <li>Loads block 0 of the disk to page 1 of the memory (physical address 512).</li>
                              <li>After loading the block to memory, it sets the value of the register <a href ="http://exposnitc.github.io/arch_spec-files/machine_organisation.html" target="_blank">IP</a> (Instruction Pointer) to 512 so that the next instruction is fetched from location 512 (page 1 in memory starts from location 512).</li>
                            </ol>
                          </p> 
                          <p>In this stage, you will write a small assembly program to print "HELLO_WORLD" using XSM Instruction set and load it into block 0 of the disk using XFS-Interface as the <b>OS Startup Code</b>. As described above, this OS Startup Code is loaded from disk block 0 to memory page 1 by the ROM Code on machine startup and is then executed. </p>
			
			<i>The steps to do this are explained in detail below. </i>
                          <br/><br/>
                                
                          <ol style="list-style-type:decimal;margin-left:2px">
                            <li>
                              Create the assembly program to print "HELLO_WORLD". <br>The assembly code to print "HELLO_WORLD" :
                              <br><br>
                              <div> 
                                <pre>
MOV R0, "HELLO_WORLD"
MOV R16, R0
PORT P1, R16
OUT
HALT </pre>
			Save this file as <tt>$HOME/myexpos/spl/spl_progs/helloworld.xsm</tt>.
                              </div>  
                          </li>
                            
                            <br>
                            <li>
                            Load the file as OS Startup code to <tt>disk.xfs</tt> using XFS-Interface. Invoke the XFS interface and use the following command to load the OS Startup Code
                              <br><br>
                              <div>
                          <pre>cd $HOME/myexpos/xfs-interface
./xfs-interface
# load --os $HOME/myexpos/spl/spl_progs/helloworld.xsm
# exit

</pre>
                          </div>
                          <i> Note that the <tt>--os</tt> option loads the file to Block 0 of the XFS disk. </i>
			      </li>
                            <br/>
                            <li> Run the machine 
                              <br><br>
                              <div>
                                <pre>cd $HOME/myexpos/xsm
./xsm</pre>
                              </div>
                            </li>
                          </ol>
			  <br>
			  The machine will halt after printing "HELLO_WORLD".
			  <br><br>
			  <div>
			  <pre>
HELLO_WORLD
Machine is halting.</pre>
			  </div>
			  
			  <!--=========== BEGIN contents SECTION ================-->
                          <div class="container col-md-12">
                          <div class="section_area">
                          <ul class="list-group">
                           <li class="list-group-item">
                            <a data-toggle="collapse"  href="#collapseq2"><b>Q1.</b> If the OS Startup Code is loaded to some other page other than Page 1, will XSM work fine?</a>
                            <div id="collapseq2" class="panel-collapse collapse"> No. This is because after the execution of the ROM Code, IP points to <b>512</b> which is the 1<sup>st</sup> instruction of Page 1. So if the OS Startup Code is not loaded to Page 1, it results in <a href="./arch_spec-files/interrupts_exception_handling.html" target="_blank">exception</a> and leads to system crash.</div>

                          </li>
                          </ul>
                          </div>
                          </div>
			  <p><b style="color:#26A65B">Assignment 1 : </b>Write an assembly program to print numbers from 1 to 20 and run it as the OS Startup code.</p>
                          <p><b style="color:#26A65B">Assignment 2 : </b> Read and understand <a href="support_tools-files/spl.html" target="_blank">SPL specification</a>.</p>
                          </div>
                          </div>
                        <!-- Stage 4 -->

                      <div class="panel-heading" id="list_stage4">
                        <h4 class="panel-title">
                          <a data-toggle="collapse"  href="#collapse4"><span class="fa fa-check-square-o"></span>Stage 4 : Learning the SPL Language</a>
                        </h4>
                      </div>

                      <div id="collapse4" class="panel-collapse collapse">
                        <div class="panel-body">
                                                  <!-- Begin Learning Objectives-->
                          <div class="container col-md-12">
                          <div class="section_area">
                          <ul class="list-group">
                           <li class="list-group-item" style="background:#dff0d8">
                            <span class="fa fa-book"></span> &nbsp; <a data-toggle="collapse"  href="#lo4">Learning Objectives</a>
                            <div id="lo4" class="panel-collapse expand">
                            <ul>
                              <li><span class="fa fa-hand-o-right"></span>&nbsp;&nbsp; Use the SPL language to write a small <i>OS startup code</i> and generate target using the SPL compiler.</li>
                 
                            </ul>                                  
                                     
                            </div>
                          </li>
                          </ul>
                          </div>
                          </div>
                          <!-- End Learning Objectives-->

                          
                          <p>In this stage you will write a program in SPL and compile it using the <a href="support_tools-files/spl.html" target="_blank">SPL</a> compiler. After compilation,the target machine code is generated. We will then load this compiled code to block 0 of disk using XFS Interface, and get it executed by the machine like in the previous stage.  </p>
                          
                         
                          <ol style="list-style-type:decimal;margin-left:2px">
                            <li>
                              Create the program to print odd numbers from 1 to 20 using SPL. (You can see more examples of SPL programs in <tt>$HOME/myexpos/spl/samples</tt>.) <br/> <br/> Here is the SPL Code to print odd numbers from 1 to 20 :
                              <br><br>
                              <div> 
                                <pre>
alias counter R0;
counter = 0;
while(counter <= 20) do
  if(counter%2 != 0) then
    print counter;
  endif;
  counter = counter + 1;
endwhile; </pre>
                              </div> 
                              SPL doesn't support variables. Instead you can directly use XSM registers for storing program data. For convenience, you can <a href="support_tools-files/spl.html" target="_blank">alias</a> the registers with appropriate identifiers to imitate the behaviour of variables. In the above program register R0 is aliased to the identifier <var>counter</var>.
                            </li>
                            
                            <br>
                            <li>Save this file as <tt>$HOME/myexpos/spl/spl_progs/oddnos.spl</tt>. Compile this SPL program using the commands
                              <br><br>
                              <div>
                                <pre>cd $HOME/myexpos/spl
./spl $HOME/myexpos/spl/spl_progs/oddnos.spl</pre>
                            </li> 

                            <br/>
                            <li> 
                              Load the file generated by the SPL compiler (<tt>$HOME/myexpos/spl/spl_progs/os_startup.xsm</tt>) as the OS startup code to <tt>disk.xfs</tt> using the XFS Interface.
                              <br>
                             
                            </li>


                            <br/>
                            <li> Run the machine 
                             
                            </li>
                          </ol>
                          
                          The machine will halt after printing all odd numbers from 1 to 20
                          <br><br>
                          <div>
                            <pre>
1
3
5
7
9
11
13
15
17
19
Machine is halting</pre></div>

                          
                          <p><b style="color:#26A65B">Assignment 1 : </b> Write the spl program to print sum of squares of the first 20 natural numbers. Load it 						using xfs interface and run the in the machine.</p>
                          <p><b style="color:#26A65B">Assignment 2 : </b> Read and understand
                           the <a href="support_tools-files/xsm-simulator.html" target="_blank">Debugger Specification</a>.</p>

                        </div>
                      </div>

         <!-- Stage 5 -->

                      <div class="panel-heading" id="list_stage5">
                        <h4 class="panel-title">
                          <a data-toggle="collapse"  href="#collapse5"><span class="fa fa-check-square-o"></span>Stage 5 :Debugging in Kernel Mode </a>
                        </h4>
                      </div>

                      <div id="collapse5" class="panel-collapse collapse">
                        <div class="panel-body">
                            <!-- Begin Learning Objectives-->
                          <div class="container col-md-12">
                          <div class="section_area">
                          <ul class="list-group">
                           <li class="list-group-item" style="background:#dff0d8">
                            <span class="fa fa-book"></span> &nbsp; <a data-toggle="collapse"  href="#lo4">Learning Objectives</a>
                            <div id="lo4" class="panel-collapse expand">
                            <ul>
                              <li><span class="fa fa-hand-o-right"></span>&nbsp;&nbsp; Getting familiarised with the XSM Debugger.</li>
                            </ul>                                  
                                     
                            </div>
                          </li>
                          </ul>
                        </div>
                      </div>
		<!-- End Learning Objectives-->
 
 
 	  <p>In this stage you will write an SPL program with a <b> breakpoint </b> statement.It translates to <a href="arch_spec-files/instruction_set.html" 			target="_blank">BRKP</a> machine instruction and is used for debugging.
 	  <br>
 	   The system pauses on execution of a BRKP instruction when the debug flag set and you can 
 	   check the contents of registers ,memory and os data structures at that state.
 	   </p>

	 <ol style="list-style-type:decimal;margin-left:2px">
		<li> Write an SPL code to print odd numbers from 1 to 20. Add a debug instruction in between :  
		<div> 
                                <pre>
alias counter R0;
counter = 0;
while(counter <= 20) do
  if(counter%2 != 0) then
    breakpoint;
  endif;
  counter = counter + 1;
endwhile; </pre>
                              </div> 
		</li>
		<br>
		<li>
		Compile the program using the SPL compiler.
		</li>
		<br>
		<li> 
		Load the compiled xsm code as OS startup code into the XSM disk using the XFS interface.
		</li>
		<br>
		<li> 
		Run the machine in debug mode.
		<pre>cd $HOME/myexpos/xsm
./xsm --debug</pre>
		</li>
		<li>
		The Machine pauses execution after the first print statement.<br>
		View the Contents of Memory page 1. You can see the OS startup code.
		<pre>mem 1</pre>
		</li>
		<li>
		View the contents of Registers
		<pre>reg</pre>
		</li>
		<li>
		The output will be displayed as:
		<pre> </pre>
		</li>
		<li>
		Press c to continue execution till next execution of BRKP instruction.
		<pre>c</pre>
		</li>
		<li>
		View the contents of R0 register at each step and type c continue.
		</li>
	</ol>
	
                          <p><b style="color:#26A65B">Assignment 1 : </b> Read and understand the <a href="virtual_machine_spec.html" target="_blank">Virtual Machine Model</a>.</p>
                          <p><b style="color:#26A65B">Assignment 2 : </b> Read and understand the <a href="arch_spec-files/paging_hardware.html" target="_blank">Address Translation Mechanism</a>.</p>
                    </div>
                  </div>

 		
 		<!-- Stage 6 -->

                      <div class="panel-heading" id="list_stage6">
                        <h4 class="panel-title">
                          <a data-toggle="collapse"  href="#collapse6"><span class="fa fa-check-square-o"></span>Stage 6 : Running a user program </a>
                        </h4>
                      </div>

                      <div id="collapse6" class="panel-collapse collapse">
                        <div class="panel-body">
                            <!-- Begin Learning Objectives-->
                          <div class="container col-md-12">
                          <div class="section_area">
                          <ul class="list-group">
                           <li class="list-group-item" style="background:#dff0d8">
                            <span class="fa fa-book"></span> &nbsp; <a data-toggle="collapse"  href="#lo4">Learning Objectives</a>
                            <div id="lo4" class="panel-collapse expand">
                            <ul>
                              <li><span class="fa fa-hand-o-right"></span>&nbsp;&nbsp; Learn how to run an init program in user mode.</li>
                            </ul>                     
                                     
                            </div>
                          </li>
                          </ul>
                        </div>
                      </div>
		<!-- End Learning Objectives-->
		<p>  In the previous stages, you wrote and executed system programs. In this stage, you will write a user program in assembly code and execute it on the machine.
		</p>
		
		<b> Coding the user Program  </b> <br> <br>
		
		<p> A user program is different from a system program. It is to be noted that a system program is executed in kernel 
		mode whereas a user program should be run in user mode. In user mode only unprivileged instructions can be executed.
		 All memory addresses are logical in user mode . In user mode, the machine translates logical addresses
		 to physical addresses using the address translation scheme of the machine.
		</p>
		
		<p>
		In this stage, a user program is written in assembly language. 
		It is then loaded to the disk as the INIT program. 
		The first user program which is executed is called the INIT program. 
		INIT program is stored in blocks 7 and 8 of the XFS disk. It does not have an inode or root entry. (Does it?)
		</p>
		
	<ol style="list-style-type:decimal;margin-left:2px">
		<li> Write a program in machine code to compute squares of all numbers lesser 20. <br>
		In the roadmap, the path of the file is assumed to be $HOME/myexpos/expl/expl_progs/squares.xsm . <br>
		This program will be the INIT program in this stage. <br> <br>

		<pre>
//Program to calculate Squares of first 20 nums

//Initialising R0(n) and R1(n^2)
MOV R0, 0

_L1:

// Check for n < 20
MOV R16, 20
GE R16, R0
JZ R16, _L2

// Computing n^2 Store in R1
MOV R16, R0
MUL R16, R0
MOV R1, R16

//breakpoint instruction (to view contents of R1)
BRKP

// n = n + 1
ADD R0, 1

JMP _L1

_L2:

// End of Program.
		</pre>
		 
		 Note that IN and OUT are privilaged instructions and cannot be used in user mode programs. We will get i/p and o/p by s/m call
		 traps that will be explained in the later stages. For now we will use the debug mode to view the contents of register R1.
		
		 </li>
		 
		 <br>
		
		<li> Load this file to disk.xfs as INIT program using XFS interface.
		<pre># load --init $HOME/myexpos/expl/expl_progs/squares.xsm</pre>
	
</li>  
		</ol>
		
		<b> OS Startup Code </b> <br> <br>
		<p> The OS startup code will load the init process, set the necessary OS data structures necessary
			to run the program. Finally, it sets the ip to 0 and transfers control to the init program using the IRET instruction.	
		 </p>
		 
	<ol style="list-style-type:decimal;margin-left:2px">
		<li>  Load the INIT program from the disk to the memory.
		 In the memory, init program is stored in pages 65-66.
		 The xfs-interface will store init program to disk blocks 7-8.
		 The blocks 7-8 from disk is to be loaded to the memory pages 25-27 by the OS startup Code. 
		 (See <a href="os_implementation.html" target="_blank"> Memory Organization and Disk Organization </a> ). <br> <br>
		 
		 <pre>load(65,7);
load(66,8);</pre>

		 </li>
		 
		 <li>
		<a href ="os_design-files/process_table.html#per_page_table" target="_blank"> Page Table </a> for INIT must be
		set up for address translation scheme to work correctly. 
		 This is because INIT is a user process and all addresses generated are logical.
		 Machine translates these logical addresses to physical addresses by looking up the page table for INIT.  
		 The PTBR or Page Table Base Register stores the starting address of the page table of a process. 
		Here we set PTBR to starting of page table and PTLR to 3 (as we are using a total of 3 pages).
		<pre> PTBR = 28928;
 PTLR = 10;</pre>
		<li>
			Set up entries for memory pages 65 to 66 (2 pages for code) as well as one entry for memory page 76 (1 page for stack). 
			(Pages 67 - 75 are reserved. See <a href ="os_implementation.html" target="_blank"> Memory Organisation </a>.) 
			in the page table for the INIT process. Set the first word of each entry to corresponding physical page number (25 to 28) 
			and set the second word (Auxiliary information) as "0100"
			(<a href ="arch_spec-files/paging_hardware.html#aux_info" target="_blank">
			Reference Bit, Valid Bit , Write Permission Bit  and Dirty Bit respectively </a>). 
			
			<pre>[PTBR+0] = 65;
[PTBR+1] = "0100";
[PTBR+2] = 66;
[PTBR+3] = "0100";
[PTBR+4] = 76;
[PTBR+5] = "0110";</pre>
		</li>	
		<i> Note: Even though we have not used any memory region in the code, IP used memory during <a herf ="https://en.wikipedia.org/wiki/Instruction_cycle" >fetch cycle </a>. </i>
		 
		<br> <br>
		
		<li>
		 
		Next we need to set the stack pointer (SP) register. Each program in memory has an associated runtime stack.
		A runtime stack holds the local variables and function parameters while a process is running.
		The Stack Pointer or SP points to the top of this stack.
		
		<br><br>
		
		Here we assign the stack of the process at the logical address 2 x 512 (= 1024) 
		which corresponds to logical page number 2 ( logical page numbering of a process starts from 0).
	
		<br><br>
		
		Before OS Startup Code transfers control to the user program, the value of SP must be set to its starting logical address ( 3 * 512 = 1536). 
		 Since SP is used by the user program, its address should be a logical address.
		
		<br><br>
		
		<pre> SP = 2*512; </pre>
		
		<i> Note: Here we have introduced a simple memory model with 2 page code and 1 page stack memory. <br>
		The actual memory model which we shall use is different and will be explained in the later stages. . </i>
		
		</li>	<br>
		
		<li>
		The OS Startup Code transfers control of execution to the user program using an IRET instruction. An IRET performs the following operations
		<br><br>
			<ol style="list-style-type:lower-roman;margin-left:20px">
		
			<li>The privilege mode is changed from KERNEL to USER mode. </li>
		
			<li>The value in the top of the user stack (pointed to by SP) is stored in IP or Instruction Pointer. 
			The IP register contains the logical address of the next instruction to be executed in user mode.
			 IP cannot be changed explicitly by the programmer using any instruction other than branching instructions, 
			 subroutine instructions, IRET and INT instructions (See instructions). </li>
		 
			<li> Decrement the value of SP by 1 </li>
		<br>
			</ol>
		
		For an IRET instruction to function properly, the value at the top of the stack should be
		 the logical address of the next instruction. This value gets stored in IP.

		The code pages of every program in memory starts from logical address 0. (See Runtime environment). 
		Hence IP or instruction pointer needs to be set to 0 before a process starts executing. 
		As IP cannot be set explicitly, put the value 0 to the top of the stack, and IRET instruction will implicitly 
		set the IP to this value. Since the OS Startup Code runs in KERNEL mode, the physical address of SP must be used 
		to access the top of the stack. Stack of INIT process is allocated physical page number 28.
		Its corresponding physical address is 28 * 512. Hence, the following instruction will put 0 in the top of the stack
		</li>
		</ol>
 		
		<b> Making Things Work</b> <br> <br>
	<ol style="list-style-type:decimal;margin-left:2px">
		<li> Write an SPL code to print odd numbers from 1 to 20. Add a debug instruction in between : </li>
		</ol>
		

		<!--========= Stage descrptions ends here ===========-->
                </div>
            </div>
            
            
            <!-- Stage 7 -->

                      <div class="panel-heading" id="list_stage7">
                        <h4 class="panel-title">
                          <a data-toggle="collapse"  href="#collapse7"><span class="fa fa-check-square-o"></span>Stage 7 : User programs with Interrupts </a>
                        </h4>
                      </div>

                      <div id="collapse7" class="panel-collapse collapse">
                        <div class="panel-body">
                            <!-- Begin Learning Objectives-->
                          <div class="container col-md-12">
                          <div class="section_area">
                          <ul class="list-group">
                           <li class="list-group-item" style="background:#dff0d8">
                            <span class="fa fa-book"></span> &nbsp; <a data-toggle="collapse"  href="#lo7">Learning Objectives</a>
                            <div id="lo7" class="panel-collapse expand">
                            <ul>
                              <li><span class="fa fa-hand-o-right"></span>&nbsp;&nbsp; </li>
                            </ul>                                  
                                     
                            </div>
                          </li>
                          </ul>
                        </div>
                      </div>
		<!-- End Learning Objectives-->
 
	   <p>By eXpOS convention, executable files are expected to follow <a href="exposnitc.github.io/abi.html">XEXE</a> format. </p>
 	  <p>Interrupts are the mechanisms by which the user program can communicate with the kernal. User programs can access operating system services by invoking software interrupts. When an interrupt occurs while the XSM simulator is running, it transfers control to specific memory locations corresponding to the interrupt. Interrupts can be invoked either by software (through INT instruction) or by hardware. Timer interrupt, disk controller interrupt and console interrupt are the hardware interrupts supported by XSM. There are 15 software interrupts invoked using machine instructions <b>INT 4</b> to <b>INT 18</b>.</p>
 	  
 	  <p>Interrupts can only be triggered or invoked in user mode. In Kernel mode interrupts are disabled. Upon encountering an interrupt, the machine transfers control to specific locations in memory and changes from user mode to kernel mode. These memory locations contains Interrupt Routines. Since interrupt routines are executed in kernel mode, use SPL to write them. Memory pages 4 and 5 contain the Timer Interrupt Routine. Memory page (10 and 11) to (38 and 39) contain Interrupt Routines 4 to 18 (See <a href="exposnitc.github.io/os_implementation.html">Memory Organization</a>). Each interrupt routine has 2 pages in memory.</p>
 	  <p><b>NOTE: </b>The interrupt instructions INT 1 to INT 7 can be invoked from an EXpL program using system call interfaces.</p> 
 	  <p>In this stage, you will be writing user programs in assembly code and loading them according to XEXE conventions. You will also write a sample timer interrupt and software interrupts 7 and 10.</p>
 	
	 <ol style="list-style-type:decimal;margin-left:2px">
		<li> Write an SPL code to print odd numbers from 1 to 20. Add a debug instruction in between :  
		<div> 
                                <pre>
alias counter R0;
counter = 0;
while(counter <= 20) do
  if(counter%2 != 0) then
    breakpoint;
  endif;
  counter = counter + 1;
endwhile; </pre>
                              </div> 
		</li>
		<br>
		<li>
		Compile the program using the SPL compiler.
		</li>
		<br>
		<li> 
		Load the compiled xsm code as OS startup code into the XSM disk using the XFS interface.
		</li>
		<br>
		<li> 
		Run the machine in debug mode.
		<pre>cd $HOME/myexpos/xsm
./xsm --debug</pre>
		</li>
		<li>
		The Machine pauses execution after the first print statement.<br>
		View the Contents of Memory page 1. You can see the OS startup code.
		<pre>mem 1</pre>
		</li>
		<li>
		View the contents of Registers
		<pre>reg</pre>
		</li>
		<li>
		The output will be displayed as:
		<pre> </pre>
		</li>
		<li>
		Press c to continue execution till next execution of BRKP instruction.
		<pre>c</pre>
		</li>
		<li>
		View the contents of R0 register at each step and type c continue.
		</li>
	</ol>
	
                          <p><b style="color:#26A65B">Assignment 1 : </b> Read and understand the <a href="virtual_machine_spec.html" target="_blank">Virtual Machine Model</a>.</p>
                          <p><b style="color:#26A65B">Assignment 2 : </b> Read and understand the <a href="arch_spec-files/paging_hardware.html" target="_blank">Address Translation Mechanism</a>.</p>
                    </div>
                  </div>
          </div>
        </div>
      </div>
      
      
    </section>

<!--=========== Intoduction Section Ending ===============-->


     <!--=========== BEGIN FOOTER ================-->
     <footer id="footer">
       <div class="container">
         <div class="row">
           <div class="col-lg-6 col-md-6 col-sm-6">
             <div class="footer_left">
               <p><a href="http://www.nitc.ac.in/">National Institute of Technology, Calicut</a></p>
             </div>
           </div>
         </div>
       </div>
      </footer>
      <!--=========== END FOOTER ================-->

     <!-- Javascript Files
     ================================================== -->
  
     <!-- initialize jQuery Library -->
    <script src="js/jquery.min.js"></script>
    <!-- Google map -->
    <script src="js/map_js.js"></script>
    <script src="js/jquery.ui.map.js"></script>
     <!-- For smooth animatin  -->
    <script src="js/wow.min.js"></script> 
    <!-- Bootstrap js -->
    <script src="js/bootstrap.min.js"></script>
    <!-- superslides slider -->
    <script src="js/jquery.superslides.min.js" type="text/javascript"></script>
    <!-- slick slider -->
    <script src="js/slick.min.js"></script>    
    <!-- for circle counter -->
    <script src='js/jquery.circliful.min.js'></script>
    <!-- for portfolio filter gallery -->
    <script src="js/modernizr.custom.js"></script>
    <script src="js/classie.js"></script>
    <script src="js/elastic_grid.min.js"></script>
    <script src="js/portfolio_slider.js"></script>

    <script>
      $(document).on("click", function (event) {
            switch(event.target.id){
              case 'stage1': $('#collapse1').removeClass('collapse').addClass('expand'); break;
              case 'stage2': $('#collapse2').removeClass('collapse').addClass('expand'); break;
              case 'stage3': $('#collapse3').removeClass('collapse').addClass('expand'); break;
              case 'stage4': $('#collapse4').removeClass('collapse').addClass('expand'); break;
              case 'stage5': $('#collapse5').removeClass('collapse').addClass('expand'); break;
            }
            //window.scrollTo(0, $("#list_"+event.target.id).offset().top);
            $('html, body').animate({
                scrollTop: $("#list_"+event.target.id).offset().top-70
            });
        });
      
    </script>
    <!-- Custom js-->
    <script src="js/custom.js"></script>
  </body>
</html>
