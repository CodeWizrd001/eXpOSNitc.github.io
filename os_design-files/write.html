<!--This document consists of header and footer only -->

<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Basic Page Needs
    ================================================== -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <title>Write</title>

 <!-- Mobile Specific Metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="../img/favicon.jpg"/>

    <!-- CSS
    ================================================== -->       
    <!-- Bootstrap css file-->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <!-- Font awesome css file-->
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <!-- Superslide css file-->
    <link rel="stylesheet" href="../css/superslides.css">
    <!-- Slick slider css file -->
    <link href="../css/slick.css" rel="stylesheet"> 
    <!-- smooth animate css file -->
    <link rel="stylesheet" href="../css/animate.css">  
    <!-- Elastic grid css file -->
    <link rel="stylesheet" href="../css/elastic_grid.css"> 
    <!-- Circle counter cdn css file -->
    <link rel='stylesheet prefetch' href='../css/jquery.circliful.css'>    
    <!-- Default Theme css file -->
    <link id="orginal" href="../css/themes/eucalyptus-theme.css" rel="stylesheet">
    <!-- Main structure css file -->
    <link href="../style.css" rel="stylesheet">
   
    <!-- Google fonts -->
    <link href='../css/opensans.css' rel='stylesheet' type='text/css'>
    <link href='../css/varela.css' rel='stylesheet' type='text/css'>
    <link href='../css/montserrat.css' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body> 
     <!-- BEGAIN PRELOADER -->
    <div id="preloader">
      <div id="status">&nbsp;</div>
    </div>
    <!-- END PRELOADER -->

  
    <!--=========== BEGIN HEADER SECTION ================-->
    <header id="header">
      <!-- BEGIN MENU -->
      <div class="menu_area">
        <nav class="navbar navbar-default navbar-fixed-top past-main" role="navigation"> 
          <div class="container">
          <div class="navbar-header">
            <!-- FOR MOBILE VIEW COLLAPSED BUTTON -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            <!-- LOGO -->

            <!-- TEXT BASED LOGO -->
            <a class="navbar-brand" href="../index.html">eXpOS<span>NITC</span></a>
            
                              
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul id="top-menu" class="nav navbar-nav navbar-right main_nav">
              <li><a href="../index.html">Home</a></li>
              <li><a href="../documentation.html" target="_blank">Documentation</a></li> 
              <li><a href="../Roadmap.html" target="_blank">Roadmap</a></li>
               <li><a href="../Downloads.html" target="_blank">Downloads</a></li> <!--Change here--> 
               <li><a href="../faq.html" target="_blank">FAQ</a></li>
              <li><a href="../About_us.html" target="_blank">About Us</a></li>                                     
            </ul>           
          </div>
          </div>     
        </nav>  
      </div>
      <!-- END MENU -->

      
    </header>
    <!--=========== End HEADER SECTION ================--> 

	 <!--=========== BEGIN Read================-->
	<section id="seek">
		   <br><br><br>

      <div class="container">
        <div class="row">
         <div class="heading">
              <h2>Read System Call</h2>
               <br>
               <br>                                      
            <p>Arguments: File Descriptor(Integer) and a Buffer (a String/Integer variable) into which a word is to be read from the file</p>
            <p>Return Value:</p>
            <table class="table table-bordered">
            <table class="table table-bordered">
                                                    <tr>
                                                        <td>0</td>
                                                        <td>Success</td>
                                                    </tr> 
                                                   <tr>
                                                        <td>-1</td>
                                                        <td>File Descriptor given is invalid</td>
                                                    </tr> 
                                                    <tr>
                                                        <td>-2</td>
                                                        <td>No disk space / File size exceeded</td>
                                                    </tr> 
                                                     <tr>
                                                        <td>-3</td>
                                                        <td>File is the Root file</td>
                                                    </tr> 
                                                </table>
                                                <p><i><b>Description</b></i> : The Write operation writes the word stored in the buffer to the position pointed by the file pointer of the file. After each Write operation, the file pointer advances to the next word in the file. Root and Executable files cannot be written.</p> <br>

                                                <!--
                                                <p>The data structures modified are <a href="mem_ds.html#ts_table" target="_blank">Terminal Status Table</a>, <a href="process_table.html" target="_blank">Process Table</a>, <a href="mem_ds.html#file_table" target="_blank">Open File Table</a>, <a href="mem_ds.html#buffer_table" target="_blank">Buffer Table</a>, <a href="mem_ds.html#ds_table" target="_blank">Disk Status Table</a>, <a href="disk_ds.html#inode_table" target="_blank">Inode Table</a> and <a href="process_table.html#per_process_table" target="_blank">Per-Process Resource Table</a>.</p>
                                                <p>The mode flag in the <a href="process_table.html" target="_blank">Process Table</a> has to be set to Kernel mode when the process enters the system call and reset before exiting from the system call.</p>

                                                -->
             <div><h4><b>Algorithm</b>:</h4></div>
             <p><b>If</b> the word is to be written to STDOUT (terminal device) &nbsp;&nbsp; /* indicated by a file descriptor value of -2 */</p>
             
             <p style=" text-indent: 4em;">Call the <i>Terminal Write </i>function in the <a href="../os_modules/Module_4.html" target="_blank">Device manager </a> Module .</p>
			 
			<p>/* If not terminal, write to file. */</p>

      <p>If file descriptor is invalid, return -1. &nbsp;&nbsp; /* File descriptor value should be within the range 0 to 7 (both included). */</p>

       <p ><a data-toggle="collapse"   href="#collapse5a">Locate the Per-Process Resource Table of the current process.</a></p>
             <div id="collapse5a" class="panel-collapse collapse">

                <p style=" text-indent: 6em;"> Find the PID of the current process from the <a href="./mem_ds.html#ss_table" target="_blank">System Status Table</a>.</p>
                <p style=" text-indent: 6em;"> Find the User Area page number from the <a href="process_table.html#per_process_table" target="_blank">Process Table</a> entry.</p>

                 <p style=" text-indent: 6em;"> The  Per-Process Resource Table is located at the  <a href="constants.html" target="_blank">RESOURCE_TABLE_OFFSET</a> from the base of the <a href="./process_table.html#user_area" target="_blank"> User Area Page </a>.</p>

              </div>

             <p>If the Resource identifier field of the <a href="process_table.html#per_process_table" target="_blank">Per Process Resource Table</a> entry is invalid or does not indicate a <a href="constants.html" target="_blank">FILE</a>, return -1.   <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /* No file is open with this file descriptor. */</p>



      <p>Get the index of the <a href="mem_ds.html#file_table" target="_blank">Open File Table</a> entry from the Per Process Resource Table entry.</p>

      <p>Get the index of the <a href="./disk_ds.html#inode_table" target="_blank">Inode Table</a> entry from the Open File Table entry. </p>

      <p>If the File corresponds to Root file ( indicated by Inode index as INODE_ROOT), return -3. </p>

      <p>Get the Lseek position from the Open File Table entry.</p>

       <p><b>If</b> lseek position is same as the maximum file size, return -2.&nbsp;&nbsp;/* Maximum file size reached*/</p>

       <p>Acquire the Lock on the File by calling the <i>Acquire Inode</i> function in the <a href="../os_modules/Module_0.html" target="_blank">Resource Manager</a> module.</p>  

       <p> <a data-toggle="collapse"   href="#collapse8a">If the Lseek position is the same as File size </a></p>
          <div id="collapse8a" class="panel-collapse collapse">
              <p style=" text-indent: 4em;"> Find a free disk block by searching in the <a href="disk_ds.html#disk_free_list" target="_blank">Disk free list </a>.</p>

              <p style=" text-indent: 4em;"> If no free disk block is found</p> 
                   <p style=" text-indent: 6em;">Release the Lock on the file  by calling the <i>Release Inode</i> function in the <a href="../os_modules/Module_0.html" target="_blank">Resource Manager</a> module.</p>   
                   <p style=" text-indent: 6em;"> Return -2.</p>

              <p style=" text-indent: 4em;">Set the new disk block found in the corresponding (lseek / 512) disk block field  in the <a href="./disk_ds.html#inode_table" target="_blank">Inode table</a> entry.</p> 
                  
              <p style=" text-indent: 4em;">Update the file size ( ++ 512) in the corresponding field in the <a href="./disk_ds.html#inode_table" target="_blank">Inode table</a> entry.</p> 
                  
          </div>  

      <p><a data-toggle="collapse"   href="#collapse8">Find the disk block number and the position in the block from which input is read.</a></p>
      <div id="collapse8" class="panel-collapse collapse">

              <p style=" text-indent: 4em;"> Get the block index from lseek position. &nbsp;&nbsp;/* lseek value divided by the block size (512) gives the index of the block to be read*/</p>
              <p style=" text-indent: 4em;">Get the disk block number corresponding to the block index from the <a href="disk_ds.html#inode_table" target="_blank">Inode Table</a> .</p>
              <p style=" text-indent: 4em;"> Get the offset value from lseek position. &nbsp;&nbsp;/* lseek value % the block size (512) gives the position to be read from.*/</p>

      </div>

     

      <p>Write the word to the File Buffer by calling the <i>Buffer Write</i> function in the <a href="../os_modules/Module_3.html" target="_blank">Buffer Manager</a> module.</p>

      <p>Increment the Lseek position in the Open File Table entry.</p>

      <p>Release the Lock on the File by calling the <i>Release Inode</i> function in the <a href="../os_modules/Module_0.html" target="_blank">Resource Manager</a> module.</p>

  <p>Return 0. &nbsp;&nbsp;/* success */</p>
 <br>
<h4>Questions:</h4>
<div class="panel-body">
        
       
 




<br>

                      
         </div>
		</div>
		</div>
	</section>
 <!--=========== BEGIN FOOTER ================-->
     <footer id="footer">
       <div class="container">
         <div class="row">
           <div class="col-lg-6 col-md-6 col-sm-6">
             <div class="footer_left">
               <p><a href="http://www.nitc.ac.in/">National Institute of Technology, Calicut</a></p>
             </div>
           </div>
         </div>
       </div>
      </footer>
      <!--=========== END FOOTER ================-->

     <!-- Javascript Files
     ================================================== -->
  
     <!-- initialize jQuery Library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Google map -->
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script src="../js/jquery.ui.map.js"></script>
     <!-- For smooth animatin  -->
    <script src="../js/wow.min.js"></script> 
    <!-- Bootstrap js -->
    <script src="../js/bootstrap.min.js"></script>
    <!-- superslides slider -->
    <script src="../js/jquery.superslides.min.js" type="text/javascript"></script>
    <!-- slick slider -->
    <script src="../js/slick.min.js"></script>    
    <!-- for circle counter -->
    <script src='https://cdn.rawgit.com/pguso/jquery-plugin-circliful/master/js/jquery.circliful.min.js'></script>
    <!-- for portfolio filter gallery -->
    <script src="../js/modernizr.custom.js"></script>
    <script src="../js/classie.js"></script>
    <script src="../js/elastic_grid.min.js"></script>
    <script src="../js/portfolio_slider.js"></script>

    <!-- Custom js-->
    <script src="../js/custom.js"></script>
  </body>
</html>






