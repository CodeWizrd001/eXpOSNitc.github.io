<!--This document consists of header and footer only -->

<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Basic Page Needs
    ================================================== -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
     <title>Read</title>

 <!-- Mobile Specific Metas
    ================================================== -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon -->
    <link rel="shortcut icon" type="image/png" href="../img/favicon.jpg"/>

    <!-- CSS
    ================================================== -->       
    <!-- Bootstrap css file-->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <!-- Font awesome css file-->
    <link href="../css/font-awesome.min.css" rel="stylesheet">
    <!-- Superslide css file-->
    <link rel="stylesheet" href="../css/superslides.css">
    <!-- Slick slider css file -->
    <link href="../css/slick.css" rel="stylesheet"> 
    <!-- smooth animate css file -->
    <link rel="stylesheet" href="../css/animate.css">  
    <!-- Elastic grid css file -->
    <link rel="stylesheet" href="../css/elastic_grid.css"> 
    <!-- Circle counter cdn css file -->
    <link rel='stylesheet prefetch' href='https://cdn.rawgit.com/pguso/jquery-plugin-circliful/master/css/jquery.circliful.css'>    
    <!-- Default Theme css file -->
    <link id="orginal" href="../css/themes/eucalyptus-theme.css" rel="stylesheet">
    <!-- Main structure css file -->
    <link href="../style.css" rel="stylesheet">
   
    <!-- Google fonts -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Varela' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body> 
     <!-- BEGAIN PRELOADER -->
    <div id="preloader">
      <div id="status">&nbsp;</div>
    </div>
    <!-- END PRELOADER -->

  
    <!--=========== BEGIN HEADER SECTION ================-->
    <header id="header">
      <!-- BEGIN MENU -->
      <div class="menu_area">
        <nav class="navbar navbar-default navbar-fixed-top past-main" role="navigation"> 
          <div class="container">
          <div class="navbar-header">
            <!-- FOR MOBILE VIEW COLLAPSED BUTTON -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>

            <!-- LOGO -->

            <!-- TEXT BASED LOGO -->
            <a class="navbar-brand" href="../index.html">eXpOS<span>NITC</span></a>
            
                              
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul id="top-menu" class="nav navbar-nav navbar-right main_nav">
              <li class="../index.html"><a href="#">Home</a></li>
              <li><a href="../Roadmap.html">Roadmap</a></li>
              <li><a href="../Documentation.html">Documentation</a></li> 
               <li><a href="#pricing">Downloads</a></li> <!--Change here--> 
               <li><a href="../FAQ.html">FAQ</a></li>
              <li><a href="#team">About Us</a></li>                                     
            </ul>           
          </div>
          </div>     
        </nav>  
      </div>
      <!-- END MENU -->

      
    </header>
    <!--=========== End HEADER SECTION ================--> 

	 <!--=========== BEGIN Read================-->
	<section id="seek">
		   <br><br><br>

      <div class="container">
        <div class="row">
         <div class="heading">
              <h2 class="wow fadeInLeftBig">Read System Call</h2>
               <br>
               <br>                                      
            <p>Arguments: File Descriptor(Integer) and a Buffer (a String/Integer variable) into which a word is to be read from the file</p>
            <p>Return Value:</p>
            <table class="table table-bordered">
            <table class="table table-bordered">
                                                    <tr>
                                                        <td>0</td>
                                                        <td>Success</td>
                                                    </tr> 
                                                    <tr>
                                                        <td>-1</td>
                                                        <td>File Descriptor given is invalid</td>
                                                    </tr> 
                                                    <tr>
                                                        <td>-2</td>
                                                        <td>File pointer has reached the end of file</td>
                                                    </tr> 
                                                </table>
                                                <p><i>Description</i> : The Read operation reads one word from the position pointed by the file pointer and stores it into the buffer. After each read operation, the file pointer advances to the next word in the file.</p> 
                                                <p>The data structures modified are <a href="mem_ds.html#ts_table" target="_blank">Terminal Status Table</a>, <a href="process_table.html" target="_blank">Process Table</a>, <a href="mem_ds.html#file_table" target="_blank">File Table</a>, <a href="mem_ds.html#buffer_table" target="_blank">Buffer Table</a>, <a href="mem_ds.html#ds_table" target="_blank">Disk Status Table</a>, <a href="disk_ds.html#inode_table" target="_blank">Inode Table</a> and <a href="process_table.html#per_process_table" target="_blank">Per-Process Resource Table</a>.</p>
             <div><h4>Algorithm:</h4></div>
             <p><b>If</b> input is to be read from terminal &nbsp;&nbsp; /* indicated by a file descriptor value of -1 */</p>
             <p style=" text-indent: 4em;"><b>while</b> terminal is busy <b>do</b> &nbsp;&nbsp; /* check status field of <a href="mem_ds.html#ts_table" target="_blank">Terminal Status Table</a> */</p>
             <p style=" text-indent: 8em;">Change the state of the process to (WAIT_TERMINAL, _ )in the <a href="process_table.html" target="_blank">Process Table</a> and call the scheduler.</p>
             
              <p style=" text-indent: 4em;"><b>endwhile</b></p>
             <p style=" text-indent: 4em;"> Set the Status field to 1 and PID field to the PID of the current process in the <a href="mem_ds.html#ts_table" target="_blank">Terminal Status Table</a></p>
           
             <p style=" text-indent: 4em;"><b>while</b> input buffer of the current process is empty <b>do</b> &nbsp;&nbsp; /* empty input buffer is indicated by a value of -1 */</p>
             <p style=" text-indent: 8em;">Change the state of the process to (WAIT_TERMINAL, _ ) in the <a href="process_table.html" target="_blank">Process Table</a>v and call the scheduler. </p>
             
             <p style=" text-indent: 4em;"><b>endwhile</b></p>
             <p style=" text-indent: 4em;">Copy the word from the input buffer to the buffer passed as argument</p>
             <p style=" text-indent: 4em;">Return with 0. &nbsp;&nbsp;/* indicating success */</p>
             <p>If file descriptor is invalid, return -1. &nbsp;&nbsp; /* File descriptor is valid if its value ranges from 0 to 7. */</p>
             
			<p>Using the PID of the current process, locate the <a href="process_table.html#per_process_table" target="_blank">Per-Process Resource Table</a> of the current process.</p>

                        <p><b>If</b> entry in Per Process Resource Table corresponding to the file descriptor is invalid, return -1.</p>

<p>Get the index of the <a href="mem_ds.html#file_table" target="_blank">File Table</a> entry and lseek position from the Per Process Resource Table entry.</p>
<p><b>If</b> file is locked &nbsp;&nbsp;/* Locking PID in File Table entry is not -1. */ </p>
<p style=" text-indent: 4em;"><b>If</b> Locking PID is not equal to the PID of the current process &nbsp;&nbsp;/* Some other process has locked the file */</p>
<p style=" text-indent: 8em;"><b>while</b> file is locked <b>do</b></p>
<p style=" text-indent: 12em;"> Change the state of the process to (WAIT_FILE, index of File Table entry ) in the <a href="process_table.html" target="_blank">Process Table</a> and call the scheduler.</p>

           
<p style=" text-indent: 8em;"><b>endwhile</b></p>
<p>Set the Locking PID in the <a href="mem_ds.html#file_table" target="_blank">File Table</a> entry to the PID of the current process.</p>   
<p><a data-toggle="collapse" data-parent="#accordion" href="#collapse2">Check the validity of the File pointer </a></p>
<div id="collapse2" class="panel-collapse collapse">
<p style=" text-indent: 4em;">1. Get the file size of the file from the <a href="disk_ds.html#inode_table" target="_blank">Inode Table</a>.</p>
<p style=" text-indent: 4em;">2. <b>If</b> lseek position is same as the file size, return -1.&nbsp;&nbsp;/* End of file reached */</p>
</div>
<p> Get the block index from lseek position. &nbsp;&nbsp;/* lseek / XFS_MAXBSIZE gives the index of the block to be read*/</p>
<p>Get the block number corresponding to the block index from the <a href="disk_ds.html#inode_table" target="_blank">Inode Table</a> .</p>
<p> Get the offset value from lseek position. &nbsp;&nbsp;/* lseek % XFS_MAXBSIZE gives the position to be read from.*/</p>
<p>Get the buffer page number from block number,&nbsp;&nbsp;/* block number % MAX_BUFFER gives the index of the buffer to which the block is mapped.*/ </p>
<p><b>If</b> the buffer page found above is locked.&nbsp;&nbsp;/* Locking PID in <a href="mem_ds.html#buffer_table" target="_blank">Buffer Table</a> entry is not -1. */</p>  	
<p style=" text-indent: 4em;"><b>If</b> Locking PID is not equal to the PID of the current process &nbsp;&nbsp;/* Some other process has locked the buffer */</p>
<p style=" text-indent: 8em;"><b>while</b> buffer is locked <b>do</b></p>

        <p style=" text-indent: 12em;"> Change the state of the process to (WAIT_BUFFER, index of Buffer Table entry ) in the <a href="process_table.html" target="_blank">Process Table</a> and call the scheduler.</p>

           
<p style=" text-indent: 8em;"><b>endwhile</b></p>
           

<p>Set the Locking PID in the <a href="mem_ds.html#buffer_table" target="_blank">Buffer Table</a> entry to the PID of the current process.</p>
<p><b>If</b> the buffer does not have the required block &nbsp;&nbsp;/* Block Number field is either -1 or it is not equal to the number of the block to be read */ </p>
<p style=" text-indent: 4em;"><b>If</b> the buffer contains a block and the dirty bit is set</p>
<p style=" text-indent: 8em;"><b>while</b> the disk is busy &nbsp;&nbsp;/* Check the Status field of the <a href="mem_ds.html#ds_table" target="_blank">Disk Status Table</a> */</p>
 <p style=" text-indent: 12em;"> Change the state of the process to (WAIT_DISK, __ ) in the <a href="process_table.html" target="_blank">Process Table</a> and call the scheduler.</p>

<p style=" text-indent: 8em;"><b>endwhile</b></p>
<p style=" text-indent: 8em;"><a href="load_store.html" target="_blank">Store</a> the block in buffer to disk</p>  

<p style=" text-indent: 8em;"><b>while</b> the disk is busy &nbsp;&nbsp;/* Check the Status field of the <a href="mem_ds.html#ds_table" target="_blank">Disk Status Table</a> */</p>
 <p style=" text-indent: 12em;"> Change the state of the process to (WAIT_DISK, __ ) in the <a href="process_table.html" target="_blank">Process Table</a> and call the scheduler.</p>


<p style=" text-indent: 8em;"><b>endwhile</b></p>
   <p style=" text-indent: 8em;"><a href="load_store.html" target="_blank">Load</a> the block from disk to buffer.</p>  

    
   <p>Copy the word at the offset position of the block into the buffer passed as argument.</p>
<p>Increment lseek position in the <a href="process_table.html#per_process_table" target="_blank">Per-Process Resource Table</a> entry.</p>
<p><a data-toggle="collapse" data-parent="#accordion" href="#collapse16">Unlock the buffer and wake up all processes waiting for buffer</a></p>
<div id="collapse16" class="panel-collapse collapse">
<p style=" text-indent: 4em;">1. Set the Locking PID in the <a href="mem_ds.html#buffer_table" target="_blank">Buffer Table</a> entry to -1.</p>
<p style=" text-indent: 4em;">2. Check for the processes in the state (WAIT_BUFFER, index of the Buffer Table entry) in the <a href="process_table.html" target="_blank">Process Table</a> and change the state of those processes to (READY, __).</p>

</div>
<p><a data-toggle="collapse" data-parent="#accordion" href="#collapse6">Unlock the file and wake up all processes waiting for file</a></p>
<div id="collapse6" class="panel-collapse collapse">
<p style=" text-indent: 4em;">1. Set the Locking PID in the <a href="mem_ds.html#file_table" target="_blank">File Table</a> entry to -1.</p>
<p style=" text-indent: 4em;">2. Check for the processes in the state (WAIT_FILE, index of the File Table entry) in the <a href="process_table.html" target="_blank">Process Table</a> and change the state of those processes to (READY, __).</p>

</div>
<p>Return with 0. &nbsp;&nbsp;/* success */</p>
 







                      
         </div>
		</div>
		</div>
	</section>
 <!--=========== BEGIN FOOTER ================-->
     <footer id="footer">
       <div class="container">
         <div class="row">
           <div class="col-lg-6 col-md-6 col-sm-6">
             <div class="footer_left">
               <p><a href="http://www.nitc.ac.in/">National Institute of Technology, Calicut</a></p>
             </div>
           </div>
         </div>
       </div>
      </footer>
      <!--=========== END FOOTER ================-->

     <!-- Javascript Files
     ================================================== -->
  
     <!-- initialize jQuery Library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Google map -->
    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script src="../js/jquery.ui.map.js"></script>
     <!-- For smooth animatin  -->
    <script src="../js/wow.min.js"></script> 
    <!-- Bootstrap js -->
    <script src="../js/bootstrap.min.js"></script>
    <!-- superslides slider -->
    <script src="../js/jquery.superslides.min.js" type="text/javascript"></script>
    <!-- slick slider -->
    <script src="../js/slick.min.js"></script>    
    <!-- for circle counter -->
    <script src='https://cdn.rawgit.com/pguso/jquery-plugin-circliful/master/js/jquery.circliful.min.js'></script>
    <!-- for portfolio filter gallery -->
    <script src="../js/modernizr.custom.js"></script>
    <script src="../js/classie.js"></script>
    <script src="../js/elastic_grid.min.js"></script>
    <script src="../js/portfolio_slider.js"></script>

    <!-- Custom js-->
    <script src="../js/custom.js"></script>
  </body>
</html>






